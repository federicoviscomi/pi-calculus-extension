
\section{Syntax}
As we did whit $\pi$ calculus, we suppose that we have a countable set of names $\mathbb{N}$, ranged over by lower case letters $a,b, \cdots, z$. This names are used for communication channels and values. Furthermore we have a set of identifiers, ranged over by $A$. We represent the agents or processes by upper case letters $P,Q, \cdots $. A multi $\pi$ process, in addiction to the same actions of a $\pi$ process, can perform also a strong prefix output:
\begin{center}
  $\pi$ ::= $\overline{x}y$ | $x(z)$ | $\underline{\overline{x}y}$ | $\tau$ 
\end{center}
The process are defined, just as original $\pi$ calculus, by the following grammar:
\begin{center}
  \begin{tabular}{l}
    $P,Q$ ::= $0$ | $\pi.P$ | $P|Q$ | $P+Q$ | $(\nu x) P$ | $A(y_{1}, \cdots, y_{n})$
  \end{tabular}
\end{center}
and they have the same intuitive meaning as for the $\pi$ calculus. The strong prefix output allows a process to make an atomic sequence of actions, so that more than one process can synchronize on this sequence. For the moment we allow the strong prefix to be on output names only. Also one can use the strong prefix only as an action prefixing for processes that can make at least a further action. 

Multi $\pi$ calculus is a conservative extension of the $\pi$ calculus in the sense that: any $\pi$ calculus process $p$ is also a multi $\pi$ calculus process and the semantic of $p$ according to the SOS rules of $\pi$ calculus is the same as the semantic of $p$ according to the SOS rules of multi $\pi$ calculus. 

We have to extend the following definition to deal with the strong prefix:
\begin{center}
  \begin{tabular}{ll}
	$B(\underline{\overline{x}y}.Q, I) = B(Q,I)$
      &
	$F(\underline{\overline{x}y}.Q, I) = \{x,\overline{x},y,\overline{y}\}\cup F(Q, I)$
    \\
  \end{tabular}
\end{center}


\section{Operational semantic}
\subsection{Early operational semantic with structural congruence}

The semantic of a multi $\pi$ process is labeled transition system such that
\begin{itemize}
  \item 
    the nodes are multi $\pi$ calculus process. The set of node is $\mathbb{P}_{m}$
  \item
    the actions are multi $\pi$ calculus actions. The set of actions is $\mathbb{A}_{m}$, we use $\alpha, \alpha_{1}, \alpha_{2},\cdots $ to range over the set of actions, we use $\sigma, \sigma_{1}, \sigma_{2}, \cdots $ to range over the set $\mathbb{A}_{m}^{+} \cup \{\tau\}$. Note that $\sigma$ is a non empty sequence of actions.
  \item
    the transition relations is $\rightarrow\subseteq \mathbb{P}_{m}\times (\mathbb{A}_{m}^{+} \cup \{\tau\})\times \mathbb{P}_{m}$
\end{itemize}

In this case, a label can be a sequence of prefixes, whether in the original $\pi$ calculus a label can be only a prefix. We use the symbol $\cdot$ to denote the concatenation operator.

\begin{definition}\index{transition relation! multipi! output only! early! with structural congruence}
  The \emph{early transition relation} is the smallest relation induced by the rules in table \ref{multipiearlywith}. 
% The relation $opn$ is defined in table \ref{opn}.
  \begin{table}
    \begin{tabular}{lll}
      \hline\\
	  $\inferrule* [left=\bf{Out}]{
	  }{
	    \overline{x}y.P \xrightarrow{\overline{x}y} P
	  }$
	&
	  $\inferrule* [left=\bf{EInp}]{
	  }{
	    x(y).P \xrightarrow{xz} P\{z/y\}
	  }$
	&
	  $\inferrule* [left=\bf{Tau}]{
	  }{
	    \tau.P \xrightarrow{\tau} P
	  }$
      \\\\
	  $\inferrule* [left=\bf{SOutSeq}]{
	      P \xrightarrow{\sigma} Q
	    \\
	      |\sigma|>1
	  }{
	    \underline{\overline{x}y}.P \xrightarrow{\overline{x}y \cdot \sigma} Q
	  }$
	&
	  $\inferrule* [left=\bf{SOut}]{
	      P \xrightarrow{\alpha} Q
	    \\
	      \alpha\; output
	  }{
	    \underline{\overline{x}y}.P \xrightarrow{\overline{x}y \cdot \alpha} Q
	  }$
	&
	  $\inferrule* [left=\bf{SOutTau}]{
	    P \xrightarrow{\tau} Q
	  }{
	    \underline{\overline{x}y}.P \xrightarrow{\overline{x}y} Q
	  }$
      \\\\
	  $\inferrule* [left=\bf{EComSng}]{
	      P \xrightarrow{\overline{x}y} P^{'}
	    \\
	      Q \xrightarrow{xy} Q^{'}
	  }{
	    P|Q \xrightarrow{\tau} P^{'}|Q^{'}
	  }$
	&
	  $\inferrule* [left=\bf{Cong}]{
	      P\equiv P^{'}
	    \\
	      P^{'} \xrightarrow{\sigma} Q
	  }{
	      P \xrightarrow{\sigma} Q
	  }$
	&
	  $\inferrule* [left=\bf{Par}]{
	    P \xrightarrow{\sigma} P^{'}
	  }{
	    P|Q \xrightarrow{\sigma} P^{'}|Q
	  }$
      \\\\
	  $\inferrule* [left=\bf{EComSeq}]{
	      P \xrightarrow{\overline{x}y\cdot \sigma} P^{'}
	    \\
	      Q\xrightarrow{xy} Q^{'}
	  }{
	    P|Q \xrightarrow{\sigma} P^{'}|Q^{'}
	  }$
	&
	  $\inferrule* [left=\bf{Sum}]{
	    P \xrightarrow{\sigma} P^{'}
	  }{
	    P+Q \xrightarrow{\sigma} P^{'}
	  }$
	&
      \\\\
% 	  $\inferrule* [left=\bf{OpnSeq}]{
% 	      P \xrightarrow{\sigma} P^{'}
% 	    \\ 
% 	      \exists \overline{x}z\in \sigma: x\neq z
% 	  }{
% 	      (\nu z)P \xrightarrow{opn(\sigma,z)} P^{'}
% 	  }$
	&
	  $\inferrule* [left=\bf{Res}]{
	      P \xrightarrow{\sigma} P^{'}
	    \\
	      z\notin n(\alpha)
	  }{
	    (\nu) z P \xrightarrow{\sigma} (\nu) z P^{'}
	  }$
	&
      \\\\\hline
    \end{tabular}
    \caption{Multi $\pi$ early semantic with structural congruence}
    \label{multipiearlywith}
  \end{table}


%   \begin{table}
%     \begin{tabular}{lll}
%       \hline\\
% 	  $\inferrule* {
% 	      x\neq z
% 	  }{
% 	      opn(\overline{x}z,z)=\overline{x}(z)
% 	  }$
% 	&
% 	  $\inferrule* {
% 	      x\neq z
% 	  }{
% 	      opn(\overline{x}z\cdot \sigma,z)=\overline{x}(z)\cdot opn(\sigma,z)
% 	  }$
% 	&
%       \\\\
% 	  $\inferrule* {
% 	    y\neq z
% 	  }{
% 	      opn(\overline{x}y,z)=\overline{x}y
% 	  }$
% 	&
% 	  $\inferrule* {
% 	    y\neq z
% 	  }{
% 	      opn(\overline{x}y\cdot \sigma,z)=\overline{x}y\cdot opn(\sigma,z)
% 	  }$
% 	&
%       \\\\\hline
%     \end{tabular}
%     \caption{relation $opn$}
%     \label{opn}
%   \end{table}


\end{definition}


\begin{lemma}\label{lemmastrongsequenceoutonly}
  If $P\xrightarrow{\sigma} Q$ then only one of the following cases hold: 
  \begin{itemize}
    \item 
      $|\sigma|=1$
    \item
      $|\sigma|>1$ and all the actions are output.
  \end{itemize}
\end{lemma}




\begin{example}Multi-party synchronization.
  We show an example of a derivation of three processes that synchronize.
\begin{center}
$\inferrule* [left=\bf{Res}]{
    x\notin n(\tau)
   \\
    \inferrule* [left=\bf{EComSeq}]{
	  \underline{\overline{x}y}.\overline{x}y.0|x(y).0
	    \xrightarrow{\overline{x}y}
	      0|0
      \\
	\inferrule* [left=\bf{Inp}]{
	}{
	  x(y).0	
	    \xrightarrow{xy} 
	      0
	}
    }{
      ((\underline{\overline{x}y}.\overline{x}y.0|x(y).0)|x(y).0)
	\xrightarrow{\tau}
	  ((0|0)|0)
    }
  }{
    (\nu x)((\underline{\overline{x}y}.\overline{x}y.0|x(y).0)|x(y).0)
      \xrightarrow{\tau}
	(\nu x)((0|0)|0)
}$
\end{center}

\begin{center}
$\inferrule* [left=\bf{EComSng}]{
  \inferrule* [left=\bf{SOut}]{
    \inferrule* [left=\bf{Out}]{
    }{
      \overline{x}y.0
	\xrightarrow{\overline{x}y}
	  0
    }
  }{
    \underline{\overline{x}y}.\overline{x}y.0
      \xrightarrow{\overline{x}y\cdot \overline{x}y}
	0
  }
  \\
    x(y).0 \xrightarrow{xy} 0
}{
  \underline{\overline{x}y}.\overline{x}y.0|x(y).0
    \xrightarrow{\overline{x}y}
      0|0
}$
\end{center}

\end{example}

\begin{example}Transactional synchronization
  In this setting two process cannot synchronize on a sequence of actions with length greater than one. This is because of the rules $EComSng$ and $EComSeq$.
\end{example}



\subsection{Late operational semantic with structural congruence}

\begin{definition}\index{transition relation! multipi! output only! late! with structural congruence}
  The \emph{late transition relation with structural congruence} is the smallest relation induced by the rules in table \ref{multipilatewith}.
  \begin{table}
    \begin{tabular}{ll}
	  \hline\\
	    $\inferrule* [left=\bf{Pref}]{
	    \alpha\; not\; a\; strong\; prefix
	  }{
	    \alpha.P \xrightarrow{\alpha} P
	  }$
	&
	  $\inferrule* [left=\bf{Par}]{
	      P \xrightarrow{\sigma} P^{'}
	    \\
	      bn(\sigma)\cap fn(Q)=\emptyset	  
	  }{
	    P|Q \xrightarrow{\sigma} P^{'}|Q
	  }$
      \\\\
	  $\inferrule* [left=\bf{SOut}]{
	      P \xrightarrow{\alpha} P^{'}
	    \\
	      \alpha\; output
	  }{
	      \underline{\overline{x}y}.P \xrightarrow{\overline{x}y \cdot \alpha} P^{'}
	  }$
	&
	  $\inferrule* [left=\bf{LComSeq}]{
	      P \xrightarrow{xy} P^{'}
	    \\
	      Q\xrightarrow{\overline{x}z\cdot \sigma} Q^{'}
	    \\
	      z\notin fn(P)
	  }{
	    P|Q \xrightarrow{\sigma} P^{'}\{z/y\}|Q^{'}
	  }$
      \\\\
	  $\inferrule* [left=\bf{Sum}]{
	    P \xrightarrow{\sigma} P^{'}
	  }{
	    P+Q \xrightarrow{\sigma} P^{'}
	  }$
	&
	  $\inferrule* [left=\bf{Cong}]{
	      P\equiv P^{'}
	    \\
	      P^{'} \xrightarrow{\sigma} Q
	  }{
	      P \xrightarrow{\sigma} Q
	  }$
      \\\\
	  $\inferrule* [left=\bf{Res}]{
	    P \xrightarrow{\sigma} P^{'} z\notin n(\alpha)
	  }{
	    (\nu) z P \xrightarrow{\sigma} (\nu) z P^{'}
	  }$
	&
	  $\inferrule* [left=\bf{LComSng}]{
	      P \xrightarrow{xy} P^{'}
	    \\
	      Q\xrightarrow{\overline{x}z} Q^{'}
	    \\
	      z\notin fn(P)
	  }{
	    P|Q \xrightarrow{\tau} P^{'}\{z/y\}|Q^{'}
	  }$
      \\\\
	  $\inferrule* [left=\bf{SOutSeq}]{
	      P \xrightarrow{\sigma} P^{'}
	    \\
	      |\sigma| > 1
	  }{
	      \underline{\overline{x}y}.P \xrightarrow{\overline{x}y \cdot \sigma} P^{'}
	  }$
      &
      \\\hline
    \end{tabular}
    \caption{Multi$\pi$ late semantic with structural congruence}
    \label{multipilatewith}
  \end{table}
\end{definition}

\begin{example}Multi-party synchronization. 
  We show an example of a derivation of three processes that synchronize in the late semantic.
\begin{center}
$\inferrule* [left=\bf{Res}]{
    x\notin n(\tau)
   \\
    \inferrule* [left=\bf{LComSeq}]{
	  \underline{\overline{x}y}.\overline{x}y.0|x(y).0
	    \xrightarrow{\overline{x}y}
	      0|0
      \\
	\inferrule* [left=\bf{Pref}]{
	}{
	  x(y).0	
	    \xrightarrow{x(y)} 
	      0
	}
    }{
      ((\underline{\overline{x}y}.\overline{x}y.0|x(y).0)|x(y).0)
	\xrightarrow{\tau}
	  ((0|0)|0)
    }
  }{
    (\nu x)((\underline{\overline{x}y}.\overline{x}y.0|x(y).0)|x(y).0)
      \xrightarrow{\tau}
	(\nu x)((0|0)|0)
}$
\end{center}

\begin{center}
$\inferrule* [left=\bf{LComSng}]{
  \inferrule* [left=\bf{SOut}]{
    \inferrule* [left=\bf{Pref}]{
    }{
      \overline{x}y.0
	\xrightarrow{\overline{x}y}
	  0
    }
  }{
    \underline{\overline{x}y}.\overline{x}y.0
      \xrightarrow{\overline{x}y\cdot \overline{x}y}
	0
  }
  \\
    \inferrule* [left=\bf{Pref}]{
    }{
      x(y).0 \xrightarrow{x(y)} 0
    }
}{
  \underline{\overline{x}y}.\overline{x}y.0|x(y).0
    \xrightarrow{\overline{x}y}
      0|0
}$
\end{center}

\end{example}

















\subsection{Low level semantic}
This section contains the definition of an alternative semantic for multi $\pi$. First we define a low level version of the multi $\pi$ calculus(here with strong prefixing on output only), we call this language low multi $\pi$. The low multi $\pi$ is the multi $\pi$ enriched with a marked or intermediate process $*P$:
\begin{center}
   \begin{tabular}{l}
     $P,Q$ ::= $0$ | $\pi.P$ | $P|Q$ | $P+Q$ | $(\nu x) P$ | $A(x_{1}, \cdots, x_{n})$ | $*P$
   \\\\
     $\pi$ ::= $\overline{x}y$ | $x(y)$ | $\underline{\overline{x}y}$ | $\tau$ 
   \end{tabular}
\end{center}
\begin{definition}
  The low level transition relation is the smallest relation induced by the rules in table \ref{lowleveltransitionrelationearlyoutonly} in which $P$ stands for a process without mark, $L$ stands for a process with mark and $S$ can stand for both. 
  \begin{table}
    \begin{tabular}{lll}
      \hline\\
	  $\inferrule* [left=\bf{Out}]{
	  }{
	    \overline{x}y.P \stackrel{\overline{x}y}{\longmapsto} P
	  }$
	  &
	  $\inferrule* [left=\bf{EInp}]{
	  }{
	    x(y).P \stackrel{xz}{\longmapsto} P\{z/y\}
	  }$
	  &
	  $\inferrule* [left=\bf{SOutLow}]{
	  }{
	    \underline{\overline{x}y}.P \stackrel{\overline{x}y}{\longmapsto} * P
	  }$
      \\\\
	  $\inferrule* [left=\bf{Tau}]{
	  }{
	    \tau.P \stackrel{\tau}{\longmapsto} P
	  }$
	  &
	  $\inferrule* [left=\bf{Res}]{
	      S \stackrel{\gamma}{\longmapsto} S^{'}
	    \\
	      y\notin n(\gamma)
	  }{
	    (\nu y) S \stackrel{\gamma}{\longmapsto} (\nu y) S^{'}
	  }$
	  &
	  $\inferrule* [left=\bf{StarOut}]{
	      S \stackrel{\overline{x}y}{\longmapsto} S^{'}
	  }{
	      *S \stackrel{\overline{x}y}{\longmapsto} S^{'}
	  }$
      \\\\\\
	  $\inferrule* [left=\bf{Com1}]{
	      P \stackrel{\overline{x}y}{\longmapsto} P^{'}
	    \\
	      Q \stackrel{xy}{\longmapsto} Q^{'}
	  }{
	    P|Q \stackrel{\tau}{\longmapsto} P^{'}|Q^{'}
	  }$
	  &
	  $\inferrule* [left=\bf{Cong}]{
	      P\equiv P^{'}
	    \\
	      P^{'} \stackrel{\gamma}{\longmapsto} S
	  }{
	      P \stackrel{\gamma}{\longmapsto} S
	  }$
	  &
	  $\inferrule* [left=\bf{Par1L}]{
	      S \stackrel{\gamma}{\longmapsto} S^{'}
% 	    \\ 
% 	      bn(\gamma)\cap fn(Q)=\emptyset
	  }{
	      S|Q \stackrel{\gamma}{\longmapsto} S^{'}|Q
	  }$
       \\\\
	  $\inferrule* [left=\bf{Com3L}]{
	      P \stackrel{\overline{x}y}{\longmapsto} L
	    \\
	      Q \stackrel{xy}{\longmapsto} Q^{'}
	  }{
	    P|Q \stackrel{\epsilon}{\longmapsto} L|Q^{'}
	  }$
	  &
	  $\inferrule* [left=\bf{Com3R}]{
	      P \stackrel{xy}{\longmapsto} P^{'}
	    \\
	      Q \stackrel{\overline{x}y}{\longmapsto} L
	  }{
	    P|Q \stackrel{\epsilon}{\longmapsto} P^{'}|L
	  }$
	  &
	  $\inferrule* [left=\bf{Par1R}]{
	      S \stackrel{\gamma}{\longmapsto} S^{'}
% 	    \\ 
% 	      bn(\gamma)\cap fn(Q)=\emptyset
	  }{
	      Q|S \stackrel{\gamma}{\longmapsto} Q|S^{'}
	  }$
       \\\\
	  $\inferrule* [left=\bf{Com4L}]{
	      L \stackrel{\overline{x}y}{\longmapsto} Q
	    \\
	      P \stackrel{xy}{\longmapsto} P^{'}
	  }{
	    L|P \stackrel{\tau}{\longmapsto} Q|P^{'}
	  }$
	  &
	  $\inferrule* [left=\bf{Com4R}]{
	      P \stackrel{xy}{\longmapsto} P^{'}
	    \\
	      L \stackrel{\overline{x}y}{\longmapsto} Q
	  }{
	    P|L \stackrel{\tau}{\longmapsto} P^{'}|Q
	  }$
	  &
	  $\inferrule* [left=\bf{Sum}]{
	    P \stackrel{\gamma}{\longmapsto} S
	  }{
	    P+Q \stackrel{\gamma}{\longmapsto} S
	  }$
      \\\\\\
	  $\inferrule* [left=\bf{Com2L}]{
	      L_{1} \stackrel{\overline{x}y}{\longmapsto} L_{1}^{'}
	    \\
	      P \stackrel{xy}{\longmapsto} Q
	  }{
	    L_{1}|P \stackrel{\epsilon}{\longmapsto} L_{1}^{'}|Q
	  }$
	  &
	  $\inferrule* [left=\bf{Com2R}]{
	      P \stackrel{xy}{\longmapsto} Q
	    \\
	      L_{1} \stackrel{\overline{x}y}{\longmapsto} L_{1}^{'}
	  }{
	    P|L_{1} \stackrel{\epsilon}{\longmapsto} Q|L_{1}^{'}
	  }$
	  &
	  $\inferrule* [left=\bf{StarEps}]{
	      S \stackrel{\epsilon}{\longmapsto} S^{'}
	  }{
	      *S \stackrel{\epsilon}{\longmapsto} S^{'}
	  }$
% 	  $\inferrule* [left=\bf{Opn}]{
% 	      S \xrightarrow{\overline{x}y} S^{'}
% 	  }{
% 	      (\nu y)P \xrightarrow{\overline{x}(y)} P^{'}
% 	  }$
%       \\\\\\
% 	  $\inferrule* [left=\bf{Par2L}]{
% 	     P \stackrel{\gamma}{\longmapsto} L
% % 	    \\ 
% % 	      bn(\gamma)\cap fn(Q)=\emptyset
% 	  }{
% 	      P|Q \stackrel{\gamma}{\longmapsto} L|*Q
% 	  }$
% 	&
% 	  $\inferrule* [left=\bf{Par2R}]{
% 	     P \stackrel{\gamma}{\longmapsto} L
% % 	    \\ 
% % 	      bn(\gamma)\cap fn(Q)=\emptyset
% 	  }{
% 	      Q|P \stackrel{\gamma}{\longmapsto} *Q|L
% 	  }$
%       \\\\
% 	  $\inferrule* [left=\bf{Par3L}]{
% 	      L_{1} \stackrel{\gamma}{\longmapsto} L_{1}^{'}
% % 	    \\ 
% % 	      bn(\gamma)\cap fn(L_{2})=\emptyset
% 	  }{
% 	      L_{1}|L_{2} \stackrel{\gamma}{\longmapsto} L_{1}^{'}|L_{2}
% 	  }$
% 	&
% 	  $\inferrule* [left=\bf{Par3R}]{
% 	      L_{2} \stackrel{\gamma}{\longmapsto} L_{2}^{'}
% % 	    \\ 
% % 	      bn(\gamma)\cap fn(L_{2})=\emptyset
% 	  }{
% 	      L_{1}|L_{2} \stackrel{\gamma}{\longmapsto} L_{1}|L_{2}^{'}
% 	  }$
      \\\\\hline
    \end{tabular}
    \caption{Low multi $\pi$ early semantic with structural congruence}
    \label{lowleveltransitionrelationearlyoutonly}
  \end{table}
\end{definition}

\begin{lemma}\label{multioutconstraintswithmarked}
  For all unmarked processes $P,Q$ and marked processes $L, L_{1}, L_{2}$.
  \begin{itemize}
    \item
      if $L_{1}\stackrel{\alpha}{\longmapsto}L_{2}$ or  $P\stackrel{\alpha}{\longmapsto}L$ then $\alpha$ can only be an output or an $\epsilon$
    \item
      if $L\stackrel{\alpha}{\longmapsto}P$ then $\alpha$ can only be an output or a $\tau$
    \item
      if $P\stackrel{\alpha}{\longmapsto}Q$ then $\alpha$ cannot be an $\epsilon$
  \end{itemize}
%   In other terms:
%   \begin{center}
%     \synttree[
%       sdf
%       [sdfdf]
%     ]
%   \end{center}
  \begin{proof}
    DA FARE
  \end{proof}
\end{lemma}


\begin{definition}
  Let $P, Q$ be unmarked processes and $L_{1}, \cdots, L_{k-1}$ marked processes. We define the derivation relation $\rightarrow_{s}$ in the following way:
  \begin{center}
    $\inferrule* [left=\bf{Low}]{
	P \stackrel{\gamma_{1}}{\longmapsto} L_{1} \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} Q
      \\
	k\geq 1
    }{
      P \xrightarrow{\gamma_{1} \cdots \gamma_{k}}_{s}  Q
    }$
  \end{center}
  We need to be precise about the concatenation operator $\cdot$ since we have introduced the new label $\epsilon$. Let $a$ be an action such that $a\neq \tau$ and $a\neq \epsilon$ then the following rules hold:
  \begin{center}
      \begin{tabular}{lll}
	  $\epsilon \cdot a = a \cdot \epsilon = a$
	&
	  $\epsilon \cdot \epsilon = \epsilon$
	&
	  $\tau \cdot \epsilon = \epsilon \cdot \tau = \tau$
	\\
	  $\tau \cdot a = a \cdot \tau = a$
	&
	  $\tau \cdot \tau = \tau$
	&
      \end{tabular}
  \end{center}
\end{definition}


\begin{example}Multi-parti synchronization
  \begin{center}
    $\inferrule* [left=\bf{Par1L}]{
      \inferrule* [left=\bf{Par1L}]{
	\inferrule* [left=\bf{Com2R}]{
	  \inferrule* [left=\bf{SOut}]{
	  }{
	    \underline{\overline{x}a}.\overline{x}b.\overline{x}c.P \stackrel{\overline{x}a}{\longmapsto} * \underline{\overline{x}b}.\overline{x}c.P
	  }
	\\
	  \inferrule* [left=\bf{Inp}]{
	  }{
	    x(d).Q \xrightarrow{xa} Q\{a/d\}
	  }
      }{
	\underline{\overline{x}a}.\underline{\overline{x}b}.\overline{x}c.P | x(d).Q 
	  \stackrel{\epsilon}{\longmapsto}
	    * \underline{\overline{x}b}.\overline{x}c.P | Q\{a/d\}
      }
    }{
	\underline{\overline{x}a}.\underline{\overline{x}b}.\overline{x}c.P | x(d).Q | x(e).R
	  \stackrel{\epsilon}{\longmapsto}
	    * \underline{\overline{x}b}.\overline{x}c.P | Q\{a/d\} | x(e).R
    }}{
	\underline{\overline{x}a}.\underline{\overline{x}b}.\overline{x}c.P | x(d).Q | x(e).R | x(f).S
	  \stackrel{\epsilon}{\longmapsto}
	    * \underline{\overline{x}b}.\overline{x}c.P | Q\{a/d\} | x(e).R | x(f).S
    }$
  \end{center}

  \begin{center}
    $\inferrule* [left=\bf{Par1L}]{
      \inferrule* [left=\bf{Com2R}]{
      \inferrule* [left=\bf{Par1L}]{
	\inferrule* [left=\bf{Star}]{
	  \inferrule* [left=\bf{SOut}]{
	  }{
	    \underline{\overline{x}b}.\overline{x}c.P \stackrel{\overline{x}b}{\longmapsto} *\overline{x}c.P
	  }
	}{
	  * \underline{\overline{x}b}.\overline{x}c.P \stackrel{\overline{x}b}{\longmapsto} *\overline{x}c.P
	}
      }{
	* \underline{\overline{x}b}.\overline{x}c.P | Q\{a/d\}  \stackrel{\overline{x}b}{\longmapsto} * \overline{x}c.P | Q\{a/d\} 
      }
      \\
      \inferrule* [left=\bf{EInp}]{
      }{
	x(e).R  \stackrel{xb}{\longmapsto} R\{b/e\}
      }
    }{
      *\underline{\overline{x}b}.\overline{x}c.P | Q\{a/d\} | x(e).R  \stackrel{\epsilon}{\longmapsto} * \overline{x}c.P | Q\{a/d\} | R\{b/e\}
    }}{
      *\underline{\overline{x}b}.\overline{x}c.P | Q\{a/d\} | x(e).R | x(f).S 
	\stackrel{\epsilon}{\longmapsto} 
	  * \overline{x}c.P | Q\{a/d\} | R\{b/e\} | x(f).S
    }$
  \end{center}

  \begin{center}
    $\inferrule* [left=\bf{Com4R}]{
      \inferrule* [left=\bf{Par1L}]{
      \inferrule* [left=\bf{Par1L}]{
	\inferrule* [left=\bf{Star}]{
	  \inferrule* [left=\bf{Out}]{
	  }{
	    \overline{x}c.P \stackrel{\overline{x}c}{\longmapsto} P
	  }
	}{
	  * \overline{x}c.P \stackrel{\overline{x}c}{\longmapsto} P
	}
      }{
	*\overline{x}c.P | Q\{a/d\}  \stackrel{\overline{x}c}{\longmapsto} P | Q\{a/d\} 
      }}{
	*\overline{x}c.P | Q\{a/d\} | R\{b/e\}  \stackrel{\overline{x}c}{\longmapsto} P | Q\{a/d\} | R\{b/e\}
      }
      \\
      \inferrule* [left=\bf{EInp}]{
      }{
	x(f).S  \stackrel{xc}{\longmapsto} R\{c/f\}
      }
    }{
      *\overline{x}c.P | Q\{a/d\} | R\{b/e\} | x(f).S  \stackrel{\tau}{\longmapsto} P | Q\{a/d\} | R\{b/e\} | S\{c/f\}
    }$
  \end{center}


\end{example}












\begin{proposition}\label{equivalencehightolow}
  Let $\rightarrow$ be the relation defined in table \ref{multipiearlywith}. If $P\xrightarrow{\sigma} Q$ then there exist $L_{1}, \cdots, L_{k}$ and $\gamma_{1}, \cdots, \gamma_{k+1}$ with $k\geq 0$ such that 
  \begin{center}
    \begin{tabular}{lll}
      $P \stackrel{\gamma_{1}}{\longmapsto} L_{1} \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} Q$ 
    &
      and
    &
      $\gamma_{1} \cdot \ldots \cdot \gamma_{k+1} = \sigma$  
    \end{tabular}
  \end{center}
  \begin{proof}
    The proof is by induction on the depth of the derivation tree of $P\xrightarrow{\sigma} Q$:
    \begin{description}
      \item[base case]
    \end{description}
	If the depth is one then the rule used have to be one of: $EInp$, $Out$, $Tau$. These rules are also in table \ref{lowleveltransitionrelationearlyoutonly} so we can derive $P \stackrel{\sigma}{\longmapsto}Q$.
    \begin{description}
      \item[inductive case]
    \end{description}
	If the depth is greater than one then the last rule used in the derivation can be:
	\begin{description}
	  \item[$SOutSeq$]: 
	    the last part of the derivation tree looks like this:
	    \begin{center}
	      $\inferrule* [left=\bf{SOutSeq}]{
		  P_{1} \xrightarrow{\sigma} Q
		\\
		  |\sigma|>1
	      }{
		\underline{\overline{x}y}.P_{1} \xrightarrow{\overline{x}y \cdot \sigma} Q
	      }$	      
	    \end{center}
	    for inductive hypothesis there exist $L_{1}, \cdots, L_{k}$ and $\gamma_{1}, \cdots, \gamma_{k+1}$ with $k\geq 0$ such that 
	    \begin{center}
	      \begin{tabular}{lll}
		$P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1} \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} Q$ 
	      &
		and
	      &
		$\gamma_{1} \cdot \ldots \cdot \gamma_{k+1} =  \sigma$
	      \end{tabular}
	    \end{center}
	    then a proof of the conclusion follows from:
	    \begin{center}
	      \begin{tabular}{ll}
		$\inferrule* [left=\bf{SOutLow}]{
 		}{
 		  \underline{\overline{x}y}.P_{1} \stackrel{\overline{x}y}{\longmapsto} *P_{1}
 		}$
	      &
		$\inferrule* [left=\bf{Star}]{
 		  P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}
 		}{
 		  *P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}
 		}$
	      \end{tabular}
	    \end{center}
	  \item[$SOut$]: this case is similar to the previous.
	  \item[$SOutTau$]: this case is similar to the previous observing that $\overline{x}y \cdot \tau = \overline{x}y$.
	  \item[$Sum$]: 
	the last part of the derivation tree looks like this:
	\begin{center}
	  $\inferrule* [left=\bf{Sum}]{
	    P_{1} \xrightarrow{\sigma} Q
	  }{
	    P_{1}+P_{2} \xrightarrow{\sigma} Q
	  }$
	\end{center}
	for the inductive hypothesis there exist $L_{1}$, $\cdots$, $L_{k}$ and $\gamma_{1}$, $\cdots$, $\gamma_{k+1}$ with $k\geq 0$ such that 
	\begin{center}
	  \begin{tabular}{lll}
	    $P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}  \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} Q$ 
	  &
	    and
	  &
	    $\gamma_{1} \cdot \ldots \cdot \gamma_{k+1} =  \sigma$  
	  \end{tabular}
	\end{center}
	A proof of the conclusion is:
	\begin{center}
	  $\inferrule* [left=\bf{Sum}]{
	      P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}
	    }{
	      P_{1}+P_{2} \stackrel{\gamma_{1}}{\longmapsto} L_{1}
	    }
	  $
	\end{center}
      \item[$Cong$]: this case is similar to the previous.
      \item[$EComSng$]: 
	the last part of the derivation tree looks like this:
	\begin{center}
	  $\inferrule* [left=\bf{Com}]{
	      P_{1} \xrightarrow{\overline{x}y} P_{1}^{'}
	    \\
	      Q_{1} \xrightarrow{xy} Q_{1}^{'}
	  }{
	    P_{1}|Q_{1} \xrightarrow{\tau} P_{1}^{'}|Q_{1}^{'}
	  }$
	\end{center}
	for inductive hypothesis there exist $L_{1}, \cdots, L_{k}$ and $\gamma_{1}, \cdots, \gamma_{k+1}$ with $k\geq 0$ such that 
	\begin{center}
	  \begin{tabular}{lll}
	    $P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}  \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} P_{1}^{'}$ 
	  &
	    and
	  &
	    $\gamma_{1} \cdot \ldots \cdot \gamma_{k+1} = \overline{x}y$
	  \end{tabular}
	\end{center}
	and there exist $R_{1}, \cdots, R_{h}$ and $\delta_{1}, \cdots, \delta_{h+1}$ with $h\geq 0$ such that 
	\begin{center}
	  \begin{tabular}{lll}
	    $Q_{1} \stackrel{\delta_{1}}{\longmapsto} R_{1}  \stackrel{\delta_{2}}{\longmapsto} R_{2} \cdots R_{h-1} \stackrel{\delta_{h}}{\longmapsto} R_{h} \stackrel{\delta_{h+1}}{\longmapsto} Q_{1}^{'}$ 
	  &
	    and
	  &
	    $\delta_{1} \cdot \ldots \cdot \delta_{h+1} = xy$
	  \end{tabular}
	\end{center}
	For lemma \ref{multioutconstraintswithmarked} there cannot be an input action in a transition involving marked processes so $h$ must be $0$ and $Q_{1} \stackrel{\delta_{1}}{\longmapsto} Q_{1}^{'}$ with $\delta_{1}=xy$. Just one of the $\gamma$s is $\overline{x}y$ and the others are $\epsilon$ or $\tau$. We can have three different cases now: 
	\begin{description}
	  \item[$\gamma_{1}=\overline{x}y$]:
	    A proof of the conclusion is:
	    \begin{center}
	      $P_{1}|Q_{1} \stackrel{\tau}{\longmapsto} L_{1}|Q_{1}^{'}
			      \stackrel{\epsilon}{\longmapsto} L_{2}|Q_{1}^{'}
		  \cdots
				\stackrel{\epsilon}{\longmapsto} L_{k}|Q_{1}^{'}
				\stackrel{\epsilon}{\longmapsto} P_{1}^{'}|Q_{1}^{'}$	  
	    \end{center}
	    we derive the first transition with rule $Com3L$, whether for the other transition we use the rule $Par1L$.
	  \item[$\gamma_{i}=\overline{x}y$]:
	    A proof of the conclusion is:
	    \begin{center}
	      $
		  P_{1}|Q_{1} \stackrel{\epsilon}{\longmapsto} L_{1}|Q_{1} 
		  \cdots
			      \stackrel{\epsilon}{\longmapsto} L_{i-1}|Q_{1} 
			      \stackrel{\tau}{\longmapsto} L_{i}|Q_{1}^{'}
			      \stackrel{\epsilon}{\longmapsto} L_{i+1}|Q_{1}^{'}
		  \cdots 
			      \stackrel{\epsilon}{\longmapsto} L_{k}|Q_{1}^{'}
			      \stackrel{\epsilon}{\longmapsto} P_{1}^{'}|Q_{1}^{'}$	  
	    \end{center}
	    we derive the transaction $ L_{i-1}|Q_{1} \stackrel{\tau}{\longmapsto} L_{i}|Q_{1}^{'}$ with rule $Com2L$, whether for the other transactions  we use the rule $Par1L$.
	  \item[$\gamma_{k+1}=\overline{x}y$] similar.
	\end{description}
      \item[$Res$]: 
	the last part of the derivation tree looks like this:
	\begin{center}
	  $\inferrule* [left=\bf{Res}]{
	      P_{1}\; \xrightarrow{\sigma}\; Q_{1}
	    \\
	      z\notin n(\sigma)
	  }{
	    (\nu z) P_{1} \;\xrightarrow{\sigma} (\nu z) Q_{1}
	  }$
	\end{center}
	for the inductive hypothesis there exist $L_{1}, \cdots, L_{k}$ and $\gamma_{1}, \cdots, \gamma_{k+1}$ with $k\geq 0$ such that 
	\begin{center}
	  \begin{tabular}{lll}
	    $P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}  \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} Q_{1}$ 
	  &
	    and
	  &
	    $\gamma_{1} \cdot \ldots \cdot \gamma_{k+1} =  \sigma$
	  \end{tabular}
	\end{center}
	We can apply the rule $Res$ to each of the previous transitions because 
	\begin{center}
	  $z\notin n(\sigma)$ implies $z\notin n(\gamma_{i})$ for each $i$
	\end{center}
	and then get a proof of the conclusion:
	\begin{center}
	  $(\nu z)P_{1} \stackrel{\gamma_{1}}{\longmapsto} (\nu z)L_{1}  \stackrel{\gamma_{2}}{\longmapsto} (\nu z)L_{2} \cdots (\nu z)L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} (\nu z)L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} (\nu z)Q_{1}$
	\end{center}
      \item[$Par$]: this case is similar to the previous.
      \item[$EComSeq$]: 
	the last part of the derivation tree looks like this:
	\begin{center}
	  $\inferrule* [left=\bf{EComSeq}]{
	      P_{1} \xrightarrow{\overline{x}y \cdot \sigma} P_{1}^{'}
	    \\
	      Q_{1} \xrightarrow{xy} Q_{1}^{'}
	  }{
	    P_{1}|Q_{1} \xrightarrow{\sigma} P_{1}^{'}|Q_{1}^{'}
	  }$
	\end{center}
	for inductive hypothesis there exist $L_{1}$, $\cdots$, $L_{k}$ and $\gamma_{1}$, $\cdots$, $\gamma_{k+1}$ with $k\geq 0$ such that 
	\begin{center}
	  \begin{tabular}{lll}
	    $P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}  \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} P_{1}^{'}$ 
	  &
	    and
	  &
	    $\gamma_{1} \cdot \ldots \cdot \gamma_{k+1} = \overline{x}y \cdot \sigma$  
	  \end{tabular}
	\end{center}
	For inductive hypothesis and lemma \ref{multioutconstraintswithmarked} $Q_{1} \stackrel{xy}{\longmapsto} Q_{1}^{'}$. We can have two different cases now depending on where the first $\overline{x}y$ is:
	\begin{description}
	  \item[$\gamma_{1}=\overline{x}y$]:
	    A proof of the conclusion is:
	    \begin{center}
	      $P_{1}|Q_{1} \stackrel{\tau}{\longmapsto} L_{1}|Q_{1}^{'}
			      \stackrel{\gamma_{2}}{\longmapsto} L_{2}|Q_{1}^{'}
		  \cdots
			      \stackrel{\gamma_{k}}{\longmapsto} L_{k}|Q_{1}^{'}
			      \stackrel{\gamma_{k+1}}{\longmapsto} P_{1}^{'}|Q_{1}^{'}$	  
	    \end{center}
	    we derive the first transition with rule $Com3L$, whether for the other transactions we use the rule $Par1L$. Since $\gamma_{1} \cdot \ldots \cdot \gamma_{k+1} = \overline{x}y \cdot \sigma$ and $\gamma_{1}=\overline{x}y$ then $\tau \cdot \gamma_{2}\cdot \ldots \cdot \gamma_{k+1}\cdot \epsilon \cdot \ldots \epsilon \cdot \tau=\sigma$
	  \item[$\gamma_{i}=\overline{x}y$]:
	    A proof of the conclusion is:
	    \begin{center}
	      $P_{1}|Q_{1} \stackrel{\epsilon}{\longmapsto} L_{1}|Q_{1} 
		  \cdots
			      \stackrel{\epsilon}{\longmapsto} L_{i-1}|Q_{1} 
			      \stackrel{\tau}{\longmapsto} L_{i}|Q_{1}^{'}
			      \stackrel{\gamma_{i+1}}{\longmapsto} L_{i+1}|Q_{1}^{'}
		  \cdots 
			      \stackrel{\gamma_{k}}{\longmapsto} L_{k}|Q_{1}^{'}
			      \stackrel{\gamma_{k+1}}{\longmapsto} P_{1}^{'}|Q_{1}^{'}$	  
	    \end{center}
	    we derive the transition $ L_{i-1}|Q_{1} \stackrel{\tau}{\longmapsto} L_{i}|Q_{1}^{'}$ with rule $Com2L$, whether for the other transactions of the premises we use the rule $Par1L$.
	  \item[$\gamma_{k+1}=\overline{x}y$]: cannot happen because $\sigma$ is not empty.
	\end{description}
    \end{description}
  \end{proof}
\end{proposition}


We would like to prove the converse of the previous proposition, namely: if there exist $L_{1}$, $\cdots$, $L_{k}$ and $\gamma_{1}$, $\cdots$, $\gamma_{k+1}$ with $k\geq 0$ such that 
  \begin{center}
    \begin{tabular}{lll}
      $P \stackrel{\gamma_{1}}{\longmapsto} L_{1}  \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} Q$ 
    &
      and
    &
      $\gamma_{1} \cdot \ldots \cdot \gamma_{k+1} =  \sigma$  
    \end{tabular}
  \end{center}
  then $P\xrightarrow{\sigma} Q$. But this is false as shown by those examples:

\begin{example}Interleaving
  \begin{center}
  $\inferrule* [left=\bf{Par1L}]{
    \inferrule* [left=\bf{Com3L}]{
	\inferrule* [left=\bf{SOut}]{
	}{
	  \underline{\overline{x}y}.\underline{\overline{a}b}.\overline{x}y.0 
	    \stackrel{\overline{x}y}{\longmapsto} 
	      *\underline{\overline{a}b}.\overline{x}y.0 
	}
      \\
	\inferrule* [left=\bf{EInp}]{
	}{
	  x(y).0
	    \stackrel{xy}{\longmapsto} 
	      0 
	}
    }{
      \underline{\overline{x}y}.\underline{\overline{a}b}.\overline{x}y.0 | x(y).0 
	\stackrel{\epsilon}{\longmapsto} 
	  *\underline{\overline{a}b}.\overline{x}y.0 | 0 
    }
  }{
    \underline{\overline{x}y}.\underline{\overline{a}b}.\overline{x}y.0 | x(y).0 | x(y).0 
      \stackrel{\epsilon}{\longmapsto} 
	*\underline{\overline{a}b}.\overline{x}y.0 | 0 | x(y).0
  }$
  \end{center}
  \begin{center}
  $\inferrule* [left=\bf{Par1L}]{
    \inferrule* [left=\bf{Par1L}]{
    \inferrule* [left=\bf{Star}]{
	\inferrule* [left=\bf{SOut}]{
	}{
	  \underline{\overline{a}b}.\overline{x}y.0 
	    \stackrel{\overline{a}b}{\longmapsto} 
	      *\overline{x}y.0 
	}
    }{
      *\underline{\overline{a}b}.\overline{x}y.0 
	\stackrel{\overline{a}b}{\longmapsto} 
	  *\overline{x}y.0 
    }
  }{
    *\underline{\overline{a}b}.\overline{x}y.0 | 0 
      \stackrel{\overline{a}b}{\longmapsto} 
	*\overline{x}y.0 | 0 
  }
  }{
    *\underline{\overline{a}b}.\overline{x}y.0 | 0 | x(y).0 
      \stackrel{\overline{a}b}{\longmapsto} 
	*\overline{x}y.0 | 0 | x(y).0
  }$
  \end{center}
  \begin{center}
  $\inferrule* [left=\bf{Com3L}]{
    \inferrule* [left=\bf{Par1L}]{
	\inferrule* [left=\bf{Star}]{
	  \inferrule* [left=\bf{Out}]{
	  }{
	    \overline{x}y.0
	      \stackrel{\overline{x}y}{\longmapsto} 
		0
	  }
	}{
	  *\overline{x}y.0
	    \stackrel{\overline{x}y}{\longmapsto} 
	      0
	}
    }{
    *\overline{x}y.0 | 0
      \stackrel{\overline{x}y}{\longmapsto} 
	0 | 0
    }
    \\
	\inferrule* [left=\bf{EInp}]{
	}{
	  x(y).0
	    \stackrel{xy}{\longmapsto} 
	      0 
	}      
  }{
    *\overline{x}y.0 | 0 | x(y).0 
      \stackrel{\tau}{\longmapsto} 
	0 | 0 | 0
  }$
  \end{center}
  this prove:
  \begin{center}
    $\underline{\overline{x}y}.\underline{\overline{a}b}.\overline{x}y.0 | x(y).0 | x(y).0 
      \stackrel{\epsilon}{\longmapsto} 
	*\underline{\overline{a}b}.\overline{x}y.0 | 0 | x(y).0 
	  \stackrel{\overline{a}b}{\longmapsto} 
	    *\overline{x}y.0 | 0 | x(y).0 
	      \stackrel{\tau}{\longmapsto} 
		0 | 0 | 0$
  \end{center}
  but there is no way to prove 
  \begin{center}
    $\underline{\overline{x}y}.\underline{\overline{a}b}.\overline{x}y.0 | x(y).0 | x(y).0 
      \xrightarrow{\overline{a}b}
	0 | 0 | 0$
  \end{center}
  \end{example}

\begin{example}Transactional synchronization
  \begin{center}
    $\inferrule*[left=\bf{Com?}]{
      \inferrule*[left=\bf{Sout}]{
      }{
	\underline{\overline{x}y}.\overline{x}y.0 
	  \stackrel{\overline{x}y}{\longmapsto}
	    *\overline{x}y.0
      } 
    \\
      \inferrule*[left=\bf{EInp}]{	
      }{
	x(y).x(y).0
	  \stackrel{xy}{\longmapsto}
	    x(y).0
      }
    }{
      \underline{\overline{x}y}.\overline{x}y.0 | x(y).x(y).0
	\stackrel{\epsilon}{\longmapsto}
	  *\overline{x}y.0 | x(y).0
    }$
  \end{center}
  \begin{center}
    $\inferrule*[left=\bf{Com?}]{
      \inferrule*[left=\bf{Star}]{
	\inferrule*[left=\bf{Out}]{
	}{
	  \overline{x}y.0 
	    \stackrel{\overline{x}y}{\longmapsto}
	      0
	} 
      }{
	  *\overline{x}y.0 
	    \stackrel{\overline{x}y}{\longmapsto}
	      0
      }
    \\
      \inferrule*[left=\bf{EInp}]{	
      }{
	x(y).0
	  \stackrel{xy}{\longmapsto}
	    0
      }
    }{
      *\overline{x}y.0 | x(y).0
	\stackrel{\epsilon}{\longmapsto}
	  0 | 0
    }$
  \end{center}
  this prove:
  \begin{center}
    $\underline{\overline{x}y}.\overline{x}y.0 | x(y).x(y).0
	\stackrel{\epsilon}{\longmapsto}
	  *\overline{x}y.0 | x(y).0
	    \stackrel{\tau}{\longmapsto}
	      0 | 0$
  \end{center}
  but we cannot derive 
  \begin{center}
    $\underline{\overline{x}y}.\overline{x}y.0 | x(y).x(y).0
      \xrightarrow{\tau}
	0 | 0$
  \end{center}
\end{example}


There is a much weaker propositions we can prove:
\begin{proposition}
  Let $\rightarrow$ be the relation defined in table \ref{multipiearlywith}. Let $\alpha$ be an action. If $P \stackrel{\alpha}{\longmapsto} Q$ then $P\xrightarrow{\alpha} Q$.
  \begin{proof}
    The proof is by induction the depth of the derivation of $P \stackrel{\alpha}{\longmapsto} Q$:
    \begin{description}
      \item[base case]
	in this case the derivation of this transition has depth one. The last(and only) rule used can be: $Out$, $EInp$ or $Tau$; these rules are also in table \ref{multipisoloinputearlywith} so we can derive $P\xrightarrow{\alpha} Q$. 
      \item[inductive case]
	in this case the last rule in the derivation can be: $Sum$, $Com1$, $Res$, $Par1L$, $Par1R$, $Cong$:
	\begin{description}
	  \item[$Com1$]:
	    \begin{center}
	      $\inferrule* [left=\bf{Com1}]{
		  P_{1} \stackrel{\overline{x}y}{\longmapsto} Q_{1}
		\\
		  P_{2} \stackrel{xy}{\longmapsto} Q_{2}
	      }{
		P_{1}|P_{2} \stackrel{\tau}{\longmapsto} Q_{1}|Q_{2}
	      }$ 
	    \end{center}
	    for inductive hypothesis $P_{1} \xrightarrow{\overline{x}y} Q_{1}$ and $P_{2} \xrightarrow{xy} Q_{2}$ so for rule $Com$ $P_{1}|P_{2} \xrightarrow{\tau} Q_{1}|Q_{2}$
	  \item[$Sum$]:
	    \begin{center}
	      $\inferrule* [left=\bf{Sum}]{
		P_{1} \stackrel{\alpha}{\longmapsto} Q
	      }{
		P_{1}+P_{2} \stackrel{\alpha}{\longmapsto} Q
	      }$ 
	    \end{center}
	    for inductive hypothesis $P_{1} \xrightarrow{\alpha} Q$ and for rule $Sum$ $P_{1}+P_{2} \xrightarrow{\alpha} Q$.
	      \item[$Res$] the first transition is:
		\begin{center}
		  $\inferrule* [left=\bf{Res}]{
			P_{1} \stackrel{\alpha}{\longmapsto} Q_{1}
		      \\
			z\notin n(\gamma_{1})
		    }{
		      (\nu z) P_{1} \stackrel{\alpha}{\longmapsto} (\nu z)Q_{1}
		  }$ 
		\end{center}		
		for inductive hypothesis $P_{1} \xrightarrow{\alpha} Q_{1}$ and for rule $Res$ $(\nu z)P_{1} \xrightarrow{\alpha} (\nu z)Q_{1}$.
	      \item[$others$]: other cases are similar.
	    \end{description}	    
    \end{description}	    
  \end{proof}
\end{proposition}


Since it's important to give a low level semantic which is equivalent to the high level one, we can propose a change to the low level semantic that fits our need. We replace the rule $Com3L$, $Com3R$, $Com2L$ and $Com2R$ with:
\begin{center}
  \begin{tabular}{ll}
	  $\inferrule* [left=\bf{Com3LStop}]{
	      P \stackrel{\overline{x}y}{\longmapsto} L
	    \\
	      Q \stackrel{xy}{\longmapsto} Q^{'}
	  }{
 	    P|Q \stackrel{\epsilon}{\longmapsto} L|stop(Q^{'})
	  }$
	  &
 	  $\inferrule* [left=\bf{Com3RStop}]{
 	      P \stackrel{xy}{\longmapsto} P^{'}
 	    \\
 	      Q \stackrel{\overline{x}y}{\longmapsto} L
 	  }{
 	    P|Q \stackrel{\epsilon}{\longmapsto} stop(P^{'})|L
 	  }$
       \\\\
	  $\inferrule* [left=\bf{Com2LStop}]{
	      L_{1} \stackrel{\overline{x}y}{\longmapsto} L_{2}
	    \\
	      P \stackrel{xy}{\longmapsto} Q
	  }{
	    L_{1}|P \stackrel{\tau}{\longmapsto} L_{2}|stop(Q)
	  }$
	  &
	  $\inferrule* [left=\bf{Com2RStop}]{
	      P \stackrel{xy}{\longmapsto} Q
	    \\
	      L_{1} \stackrel{\overline{x}y}{\longmapsto} L_{2}
	  }{
	    P|L_{1} \stackrel{\tau}{\longmapsto} stop(Q)|L_{2}
	  }$
  \end{tabular}
\end{center}
where $stop(P)$ is a multi $\pi$ process which cannot make any transition.


\begin{definition}
  The \emph{erase function} $er$ is a function that eliminates the $stop$ mark on processes. Its definition is straightforward.
\end{definition}


\begin{proposition}
  Let $\rightarrow$ be the relation defined in table \ref{multipiearlywith}.
  \begin{itemize}
    \item
      If $P\xrightarrow{\sigma} Q$ then there exist $L_{1}, \cdots, L_{k}$ with $k\geq 0$ such that 
      \begin{center}
	\begin{tabular}{lllll}
	  $P 
	    \stackrel{\gamma_{1}}{\longmapsto} 
	      L_{1}  
		\stackrel{\gamma_{2}}{\longmapsto} 
		  L_{2} 
		    \cdots 
		      L_{k-1} 
			\stackrel{\gamma_{k}}{\longmapsto} 
			  L_{k} 
			    \stackrel{\gamma_{k+1}}{\longmapsto} 
			      Q^{'}$ 
	&
	  and
	&
	  $\gamma_{1} \cdot \ldots \cdot \gamma_{k+1} =  \sigma$  
	&
	  and
	&
	  $er(Q^{'})=Q$
	\end{tabular}
      \end{center}
    \item 
      If there exist $L_{1}$, $\cdots$, $L_{k}$ with $k\geq 1$ such that
      \begin{center}
	  $P 
	    \stackrel{\gamma_{1}}{\longmapsto} 
	      L_{1}  
		\stackrel{\gamma_{2}}{\longmapsto} 
		  L_{2} 
		    \cdots 
		      L_{k-1} 
			\stackrel{\gamma_{k}}{\longmapsto} 
			  L_{k} 
			    \stackrel{\gamma_{k+1}}{\longmapsto} 
			      Q$ 
      \end{center}
      where at most one $\gamma$ is an output whether all the other $\gamma$s are $\epsilon$ or $\tau$ then $P\xrightarrow{\tau} er(Q)$ or if there is an output $\overline{x}y$ in the $\gamma$s then $P\xrightarrow{\overline{x}y} er(Q)$. 
  \end{itemize}
  \begin{proof}
    The proof of the first part of this proposition is almost exactly as the proof of \ref{equivalencehightolow} DA VERIFICARE. The proof of the second part is by induction on the depth of the derivation of the first transition:
    \begin{description}
      \item[base case]
 	The last rule in the derivation of $P \stackrel{\gamma_{1}}{\longmapsto} L_{1}$ can be only $SOutLow$:
	    \begin{center}
 		  $\inferrule* [left=\bf{SOutLow}]{
 		    }{
 		      \underbrace{\underline{\overline{x}y}.P_{1}}_{P} \stackrel{\overline{x}y}{\longmapsto} \underbrace{* P_{1}}_{L_{1}}
 		  }$ 
	    \end{center}
	    since $*P_{1}$ has a mark at the top level, the last rule used to derive $*P_{1}\stackrel{\gamma_{2}}{\longmapsto}$ has to be $Star$ so we have $P_{1}\stackrel{\gamma_{2}}{\longmapsto}L_{2}$ or $P_{1}\stackrel{\gamma_{2}}{\longmapsto}Q$ depending on $k$. We can build the following chain of transition:
	    \begin{center}
	      $P_{1} \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} Q$ 
	    \end{center}
	    since $\gamma_{1}$ is an output, the other $\gamma$s are $\epsilon$ or $\tau$, then we can apply the inductive hypothesis to get $P_{1} \xrightarrow{\tau} er(Q)$. Now a proof of the conclusion is
	    \begin{center}
	    $\inferrule* [left=\bf{SOutTau}]{
	      P_{1} \xrightarrow{\tau} er(Q)
	    }{
	      \underline{\overline{x}y}.P_{1} \xrightarrow{\overline{x}y} er(Q)
	    }$
	    \end{center}
      \item[inductive case]
	The last rule in the derivation of $P \stackrel{\gamma_{1}}{\longmapsto} L_{1}$ can be:
	\begin{description}
	  \item[$Sum$] the first transition is:
	    \begin{center}
		  $\inferrule* [left=\bf{Sum}]{
		      P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}
		    }{
		      P_{1}+P_{2} \stackrel{\gamma_{1}}{\longmapsto} L_{1}
		  }$ 
	    \end{center}
	    so we can build the following chain of transition:
	    \begin{center}
	      $P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1} \stackrel{\gamma_{2}}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\gamma_{k}}{\longmapsto} L_{k} \stackrel{\gamma_{k+1}}{\longmapsto} Q$ 
	    \end{center}
	    apply the inductive hypothesis to get $P_{1} \xrightarrow{\alpha} er(Q)$ where $\alpha$ is $\tau$ or an output. Now a proof of the conclusion is
	    \begin{center}
	    $\inferrule* [left=\bf{Sum}]{
	      P_{1} \xrightarrow{\alpha} er(Q)
	    }{
	      P_{1}+P_{2} \xrightarrow{\alpha} er(Q)
	    }$
	    \end{center}
	  \item[$Res$] the first transition is:
	    \begin{center}
	      $\inferrule* [left=\bf{Res}]{
		  P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}^{'}
		\\
		  z\notin n(\gamma_{1})
	      }{
		(\nu z) P_{1} \stackrel{\gamma_{1}}{\longmapsto} (\nu z)L_{1}^{'}
	      }$ 
	    \end{center}
	    given that $L_{1}$ has a restriction at the top level, all the other intermediate processes $L_{2}, \cdots, L_{k}$ and $Q$ have the same restriction at the top level. This is because the only rule whose conclusion is a transition that start from a possibly marked process with a restriction at its top level is $Res$. So the last rule used to prove all transition is $Res$.
	    \begin{center}
	      \begin{tabular}{ll}
		$\inferrule* [left=\bf{Res}]{
 			L_{k}^{'} \stackrel{\gamma_{k+1}}{\longmapsto} Q^{'}
 		      \\
 			z\notin n(\tau)
 		    }{
 		      (\nu z)L_{k}^{'} \stackrel{\gamma_{k+1}}{\longmapsto} (\nu z)Q^{'}
 		}$
		&
		$\inferrule* [left=\bf{Res}]{
 			L_{i}^{'} \stackrel{\gamma_{i}}{\longmapsto} L_{i+1}^{'}
 		      \\
 			z\notin n(\epsilon)
 		}{
 		      (\nu z)L_{i}^{'} \stackrel{\gamma_{i}}{\longmapsto} (\nu z)L_{i+1}^{'}
 		}$
	      \end{tabular}
	    \end{center}
	    we can build the following chain of transitions:
	    \begin{center}
	      $P_{1} 
		\stackrel{\gamma_{1}}{\longmapsto} 
		  L_{1}^{'} 
		    \stackrel{\gamma_{2}}{\longmapsto} 
		      L_{2}^{'} 
			\cdots 
			  L_{k-1}^{'} 
			    \stackrel{\gamma_{k}}{\longmapsto} 
			      L_{k}^{'}
				\stackrel{\gamma_{k+1}}{\longmapsto} 
				  Q^{'}$ 
	    \end{center}
	    then apply the inductive hypothesis to get $P_{1} \xrightarrow{\alpha} er(Q^{'})$. A proof of the conclusion can be
	    \begin{center}
	      $\inferrule* [left=\bf{Res}]{
		  P_{1} \xrightarrow{\alpha} er(Q^{'})
		\\
		  z\notin n(\tau)
	      }{
		(\nu z)P_{1} \xrightarrow{\alpha} (\nu z)er(Q^{'})=er((\nu z)Q^{'})
	      }$
	    \end{center}
	  \item[$Cong$]
	    the last rule of the derivation of the first transition is:
	    \begin{center}
	      $\inferrule* [left=\bf{Cong}]{
		  P^{'} \equiv P
		\\
		  \stackrel{\gamma_{1}}{\longmapsto} L_{1}
	      }{
		P \stackrel{\gamma_{1}}{\longmapsto} L_{1}
	      }$ 		      
	    \end{center}
	    We derive the following chain of transition:
	    \begin{center}
 		  $P^{'} 
 		    \stackrel{\gamma_{1}}{\longmapsto} 
 		      L_{1} 
 			\stackrel{\gamma_{2}}{\longmapsto} 
 			  L_{2} 
 			    \cdots 
 			      L_{k-1} 
 				\stackrel{\gamma_{k}}{\longmapsto} 
 				  L_{k}
 				    \stackrel{\gamma_{k+1}}{\longmapsto} 
 				      Q$
	    \end{center}
	    for inductive hypothesis $P^{'} \xrightarrow{\alpha} er(Q)$. A proof of the conclusion is
	    \begin{center}
	      $\inferrule* [left=\bf{Cong}]{
		  P^{'} \equiv P
		\\
		  P^{'} \xrightarrow{\alpha} er(Q)
	      }{
		P \xrightarrow{\alpha} er(Q)
	      }$ 
	    \end{center}
	  \item[$Com3LStop$]: 
	    the last part of the derivation of the first transition is:
	    \begin{center}
	    $\inferrule* [left=\bf{Com3L}]{
		P_{1} \stackrel{\overline{x}y}{\longmapsto} L_{1}^{'}
	      \\
		P_{2} \stackrel{xy}{\longmapsto} Q_{2}
	    }{
	      P_{1}|P_{2} \stackrel{\epsilon}{\longmapsto} L_{1}^{'}|stop(Q_{2})
	    }$ 		      
	    \end{center}
	    the derivations of all other transitions can end only with an instance of $Par1L$ so we have:
	    \begin{center}
	      \begin{tabular}{ll}
		  $\inferrule* [left=\bf{Par1L}]{
		    L_{i}^{'} \stackrel{\gamma_{i}}{\longmapsto} L_{i+1}^{'}
		  }{
		    L_{i}^{'}|stop(Q_{2})
		      \stackrel{\gamma_{i}}{\longmapsto} 
			L_{i+1}^{'}|stop(Q_{2})
		  }$ 	
		&
		  $\inferrule* [left=\bf{Par1L}]{
		    L_{k}^{'} \stackrel{\gamma_{k+1}}{\longmapsto} Q_{1}
		  }{
		    L_{i}^{'}|stop(Q_{2})
		      \stackrel{\gamma_{k+1}}{\longmapsto} 
			Q_{1}|stop(Q_{2})
		  }$ 	
	      \end{tabular}
	    \end{center}
	    We derive the following chain of transition:
	    \begin{center}
	      $P_{1} 
		\stackrel{\overline{x}y}{\longmapsto} 
		  L_{1}^{'} 
		    \stackrel{\gamma_{2}}{\longmapsto} 
		      L_{2}^{'} 
			\cdots 
			  L_{k-1}^{'} 
			    \stackrel{\gamma_{k}}{\longmapsto} 
			      L_{k}^{'}
				\stackrel{\gamma_{k+1}}{\longmapsto} 
				  Q_{1}$
	    \end{center}
	    for inductive hypothesis $P_{1} \xrightarrow{\overline{x}y} Q_{1}$. A proof of the conclusion is
	    \begin{center}
	    $\inferrule* [left=\bf{EComSeq}]{
		P_{1} \xrightarrow{\overline{x}} Q_{1}
	      \\
		P_{2}\xrightarrow{\overline{x}y} Q_{2}
	    }{
	      P_{1}|P_{2} \xrightarrow{\tau} Q_{1}|Q_{2}
	    }$ 
	    \end{center}
	  \item[$Par1L$]: 
	    the last part of the derivation of the first transition is:
	    \begin{center}
	      $\inferrule* [left=\bf{Par1L}]{
		      P_{1} \stackrel{\gamma_{1}}{\longmapsto} L_{1}^{'}
		  }{
		    P_{1}|P_{2} \stackrel{\gamma_{1}}{\longmapsto} L_{1}^{'}|P_{2}
	      }$
	    \end{center}
	    there can be three cases:
	    \begin{itemize}
	      \item 
		the derivations of all the other transitions end with an instance of $Par1L$. We derive the following chain of transition:
 		    \begin{center}
 		      $P_{1} 
 			\stackrel{\gamma_{1}}{\longmapsto} 
 			  L_{1}^{'} 
 			    \stackrel{\gamma_{2}}{\longmapsto} 
 			      L_{2}^{'} 
 				\cdots 
 				  L_{k-1}^{'} 
 				    \stackrel{\gamma_{k}}{\longmapsto} 
 				      L_{k}^{'}
 					\stackrel{\gamma_{k}}{\longmapsto} 
 					  Q_{1}$
 		    \end{center}
 		    for inductive hypothesis $P_{1} \xrightarrow{\alpha} er(Q_{1})$. A proof of the conclusion is
 		    \begin{center}
 		      $\inferrule* [left=\bf{Par}]{
			  P_{1} \xrightarrow{\alpha} er(Q_{1})
 		      }{
 			P_{1}|P_{2} \xrightarrow{\alpha} er(Q_{1})|P_{2}^{'}
 		      }$ 
 		    \end{center}
	      \item 
		there is one derivation that ends with an instance of $Com2LStop$ and the derivations of all the other transitions end with an instance of $Par1L$. We present here the case when the second transition ends with a $Com2LStop$, the other cases are similar. So  
 		    \begin{center}
 		      $\inferrule* [left=\bf{Com2LStop}]{
 			  L_{2}^{'} \xrightarrow{\overline{x}y} L_{2}^{'}
 			\\
 			  P_{2}\xrightarrow{xy} P_{2}^{'}
 		      }{
 			L_{2}^{'}|P_{2} \xrightarrow{\epsilon} L_{2}^{'}|stop(P_{2}^{'})
 		      }$ 
 		    \end{center}
		We derive the following chain of transition:
 		    \begin{center}
 		      $P_{1} 
 			\stackrel{\epsilon}{\longmapsto} 
 			  L_{1}^{'} 
 			    \stackrel{\overline{x}y}{\longmapsto} 
 			      L_{2}^{'} \stackrel{\epsilon}{\longmapsto} 
 				\cdots 
 				  \stackrel{\epsilon}{\longmapsto}  L_{k-1}^{'} 
 				    \stackrel{\epsilon}{\longmapsto} 
 				      L_{k}^{'}
 					\stackrel{\tau}{\longmapsto} 
 					  Q_{1}$
 		    \end{center}
 		    for inductive hypothesis $P_{1} \xrightarrow{\overline{x}y} er(Q_{1})$. A proof of the conclusion is
 		    \begin{center}
 		      $\inferrule* [left=\bf{EComSeq}]{
 			  P_{1} \xrightarrow{\overline{x}y} er(Q_{1})
 			\\
 			  P_{2}\xrightarrow{xy} P_{2}^{'}
 		      }{
 			P_{1}|P_{2} \xrightarrow{\tau} er(Q_{1})|P_{2}^{'}
 		      }$ 
 		    \end{center}
	      \item 
		the derivation of the last transition ends with an instance of $Com4L$ and the derivations of all the other transitions end with an instance of $Par1L$. We derive the following chain of transition:
 		    \begin{center}
 		      $P_{1} 
 			\stackrel{\epsilon}{\longmapsto} 
 			  L_{1}^{'} 
 			    \stackrel{\epsilon}{\longmapsto} 
 			      L_{2}^{'} 
 				\cdots 
 				  L_{k-1}^{'} 
 				    \stackrel{\epsilon}{\longmapsto} 
 				      L_{k}^{'}
 					\stackrel{\overline{x}y}{\longmapsto} 
 					  Q_{1}$
 		    \end{center}
 		    for inductive hypothesis $P_{1} \xrightarrow{\overline{x}y} er(Q_{1})$. A proof of the conclusion is
 		    \begin{center}
 		      $\inferrule* [left=\bf{EComSeq}]{
 			  P_{1} \xrightarrow{\overline{x}y} er(Q_{1})
 			\\
 			  P_{2}\xrightarrow{xy} P_{2}^{'}
 		      }{
 			P_{1}|P_{2} \xrightarrow{\tau} er(Q_{1})|P_{2}^{'}
 		      }$ 
 		    \end{center}
	    \end{itemize} 		
      \end{description}
    \end{description}
  \end{proof}
\end{proposition}



% \begin{proposition}
%   Let $\rightarrow$ be the relation defined in table \ref{lowleveltransitionrelationearlyoutonly}. If there exist $L_{1}$, $\cdots$, $L_{k}$ with $k\geq 1$ such that
%   \begin{center}
%     $P \stackrel{\epsilon}{\longmapsto} L_{1}  \stackrel{\epsilon}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\epsilon}{\longmapsto} L_{k} \stackrel{\tau}{\longmapsto} Q$ 
%   \end{center}
%   then $P\xrightarrow{\tau} Q$. 
%   \begin{proof}
%     The proof is by induction on $k$ plus the depth of the derivation of the first transition:
%     \begin{description}
%       \item[base case $k=1$]
%     \end{description}
%  
%     \begin{description}
%       \item[inductive case $k>1$]
%     \end{description}
% 	The last rule in the derivation of $P \stackrel{\gamma_{1}}{\longmapsto} L_{1}$ can be:
% 	\begin{description}
% 	      \item[$Sum$] the first transition is:
% 		\begin{center}
% 		  $\inferrule* [left=\bf{Sum}]{
% 		      P_{1} \stackrel{\epsilon}{\longmapsto} L_{1}
% 		    }{
% 		      P_{1}+P_{2} \stackrel{\epsilon}{\longmapsto} L_{1}
% 		  }$ 
% 		\end{center}
% 		so we can build the following chain of transition:
% 		\begin{center}
% 		  $P_{1} \stackrel{\epsilon}{\longmapsto} L_{1} \stackrel{\epsilon}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\epsilon}{\longmapsto} L_{k} \stackrel{\tau}{\longmapsto} Q$ 
% 		\end{center}
% 		apply the inductive hypothesis to get $P_{1} \xrightarrow{\tau} Q$. Now a proof of the conclusion can be
% 		\begin{center}
% 		  $\inferrule* [left=\bf{Sum}]{
% 		      P_{1} \xrightarrow{\tau} Q
% 		    }{
% 		      P_{1}+P_{2} \xrightarrow{\tau} Q
% 		  }$
% 		\end{center}
% 	      \item[$Res$] the first transition is:
% 		\begin{center}
% 		  $\inferrule* [left=\bf{Res}]{
% 			P_{1} \stackrel{\epsilon}{\longmapsto} L_{1}^{'}
% 		      \\
% 			z\notin n(\epsilon)
% 		    }{
% 		      (\nu z) P_{1} \stackrel{\epsilon}{\longmapsto} (\nu z)L_{1}^{'}
% 		  }$ 
% 		\end{center}
% 		given that $L_{1}$ has a restriction at the top level, all the other intermediate processes $L_{2}, \cdots, L_{k}$ and $Q$ have the same restriction at the top level. This is because the only rule whose conclusion is a transition that start from a possibly marked process with a restriction at its top level is $Res$. So the last rule used to prove all transition is $Res$.
% 		\begin{center}
% 		\begin{tabular}{ll}
% 		    $\inferrule* [left=\bf{Res}]{
% 			L_{k}^{'} \stackrel{\tau}{\longmapsto} Q^{'}
% 		      \\
% 			z\notin n(\tau)
% 		    }{
% 		      (\nu z)L_{k}^{'} \stackrel{\tau}{\longmapsto} (\nu z)Q^{'}
% 		    }$
% 		  &
% 		    $\inferrule* [left=\bf{Res}]{
% 			L_{i}^{'} \stackrel{\epsilon}{\longmapsto} L_{i+1}^{'}
% 		      \\
% 			z\notin n(\epsilon)
% 		    }{
% 		      (\nu z)L_{i}^{'} \stackrel{\epsilon}{\longmapsto} (\nu z)L_{i+1}^{'}
% 		    }$
% 		\end{tabular}
% 		\end{center}
% 		we can build the following chain of transitions:
% 		\begin{center}
% 		  $P_{1} 
% 		    \stackrel{\epsilon}{\longmapsto} 
% 		      L_{1}^{'} 
% 			\stackrel{\epsilon}{\longmapsto} 
% 			  L_{2}^{'} 
% 			    \cdots 
% 			      L_{k-1}^{'} 
% 				\stackrel{\epsilon}{\longmapsto} 
% 				  L_{k}^{'}
% 				    \stackrel{\tau}{\longmapsto} 
% 				      Q^{'}$ 
% 		\end{center}
% 		then apply the inductive hypothesis to get $P_{1} \xrightarrow{\tau} Q^{'}$. A proof of the conclusion can be
% 		\begin{center}
% 		  $\inferrule* [left=\bf{Res}]{
% 			  P_{1} \xrightarrow{\tau} Q^{'}
% 			\\
% 			  z\notin n(\tau)
% 		  }{
% 			(\nu z)P_{1} \xrightarrow{\tau} (\nu z)Q^{'}
% 		  }$
% 		\end{center}
% 	      \item[$Cong$]: 
% 		the last rule of the derivation of the first transition is:
% 		\begin{center}
% 		  $\inferrule* [left=\bf{Cong}]{
% 		      P^{'} \equiv P
% 		    \\
% 		      P^{'} \stackrel{\epsilon}{\longmapsto} L_{1}
% 		  }{
% 		    P \stackrel{\epsilon}{\longmapsto} L_{1}
% 		  }$ 		      
% 		\end{center}
% 		We derive the following chain of transition:
% 		\begin{center}
% 		  $P^{'} 
% 		    \stackrel{\epsilon}{\longmapsto} 
% 		      L_{1} 
% 			\stackrel{\epsilon}{\longmapsto} 
% 			  L_{2} 
% 			    \cdots 
% 			      L_{k-1} 
% 				\stackrel{\epsilon}{\longmapsto} 
% 				  L_{k}
% 				    \stackrel{\tau}{\longmapsto} 
% 				      Q$
% 		\end{center}
% 		for inductive hypothesis $P^{'} \xrightarrow{\tau} Q$. A proof of the conclusion is
% 		\begin{center}
% 		  $\inferrule* [left=\bf{Cong}]{
% 		      P^{'} \equiv P
% 		    \\
% 		      P^{'} \xrightarrow{\tau} Q
% 		  }{
% 		    P \xrightarrow{\tau} Q
% 		  }$ 
% 		\end{center}
% 	      \item[$Com3L$]: 
% 		the last part of the derivation of the first transition is:
% 		\begin{center}
% 		  $\inferrule* [left=\bf{Com3L}]{
% 		      P_{1} \stackrel{\overline{x}y}{\longmapsto} L_{1}^{'}
% 		    \\
% 		      P_{2} \stackrel{xy}{\longmapsto} P_{2}^{'}
% 		  }{
% 		    P_{1}|P_{2} \stackrel{\epsilon}{\longmapsto} L_{1}^{'}|P_{2}^{'}
% 		  }$ 		      
% 		\end{center}
% 		the derivations of all the transitions $L_{1} \stackrel{\epsilon}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\epsilon}{\longmapsto} L_{k}$ can end with an instance of $Par1L$ or $Com2L$ so for each $1 < i \leq k$ we have one of the following:
% 		\begin{center}
% 		\begin{tabular}{ll}
% 		  $\inferrule* [left=\bf{Par1L}]{
% 		      L_{i}^{'} \stackrel{\epsilon}{\longmapsto} L_{i+1}^{'}
% 		  }{
% 		    L_{i}^{'}|P_{i}^{'} \stackrel{\epsilon}{\longmapsto} L_{i+1}^{'}|P_{i}^{'}
% 		  }$ 		      		  
% 		&
% 		  $\inferrule* [left=\bf{Com2L}]{
% 		      L_{i}^{'} \stackrel{\overline{a}b}{\longmapsto} L_{i+1}^{'}
% 		    \\
% 		      P_{i}^{'} \stackrel{ab}{\longmapsto} P_{i+1}^{'}
% 		  }{
% 		    L_{i}^{'}|P_{i}^{'} \stackrel{\epsilon}{\longmapsto} L_{i+1}^{'}|P_{i+1}^{'}
% 		  }$ 		      		  
% 		\end{tabular}
% 		\end{center}
% 		    We derive the following chain of transition:
% 		    \begin{center}
% 		      $P_{1} \stackrel{xy}{\longmapsto} L_{1}^{'} \stackrel{\gamma_{2}}{\longmapsto} L_{2}^{'} \cdots L_{k-1}^{'} \stackrel{\gamma_{k}}{\longmapsto} L_{k}^{'}\stackrel{\gamma_{k+1}}{\longmapsto} Q_{1}$
% 		    \end{center}
% 		    for inductive hypothesis $P_{1} \xrightarrow{\sigma} Q_{1}$. A proof of the conclusion is
% 		    \begin{center}
% 		      $\inferrule* [left=\bf{EComSeq}]{
% 			  P_{1} \xrightarrow{xy \cdot \gamma_{2}\cdot \ldots \cdot \gamma_{k+1}} Q_{1}
% 			\\
% 			  P_{2}\xrightarrow{\overline{x}y} P_{2}^{'}
% 		      }{
% 			P_{1}|P_{2} \xrightarrow{\gamma_{2}\cdot \ldots \cdot \gamma_{k+1}} Q_{1}|P_{2}^{'}
% 		      }$ 
% 		    \end{center}
% 		    and $\gamma_{2}\cdot \ldots \cdot \gamma_{k+1}=\sigma$ because the first action $\gamma_{1}$ is $\epsilon$.
% 	      \item[$Par1L$]: 
% 		the last part of the derivation of the first transition is:
% 		\begin{center}
% 		  $\inferrule* [left=\bf{Par1L}]{
% 		      P_{1} \stackrel{\epsilon}{\longmapsto} L_{1}^{'}
% 		  }{
% 		    P_{1}|P_{2} \stackrel{\epsilon}{\longmapsto} L_{1}^{'}|P_{2}
% 		  }$ 		      
% 		\end{center}
% 		the derivations of all the transitions $L_{1} \stackrel{\epsilon}{\longmapsto} L_{2} \cdots L_{k-1} \stackrel{\epsilon}{\longmapsto} L_{k}$ can end with an instance of $Par1L$ or $Com2L$ so for each $1 < i \leq k$ we have one of the following:
% 		\begin{center}
% 		\begin{tabular}{ll}
% 		  $\inferrule* [left=\bf{Par1L}]{
% 		      L_{i}^{'} \stackrel{\epsilon}{\longmapsto} L_{i+1}^{'}
% 		  }{
% 		    L_{i}^{'}|P_{i}^{'} \stackrel{\epsilon}{\longmapsto} L_{i+1}^{'}|P_{i}^{'}
% 		  }$ 		      		  
% 		&
% 		  $\inferrule* [left=\bf{Com2L}]{
% 		      L_{i}^{'} \stackrel{\overline{a}b}{\longmapsto} L_{i+1}^{'}
% 		    \\
% 		      P_{i}^{'} \stackrel{ab}{\longmapsto} P_{i+1}^{'}
% 		  }{
% 		    L_{i}^{'}|P_{i}^{'} \stackrel{\epsilon}{\longmapsto} L_{i+1}^{'}|P_{i+1}^{'}
% 		  }$ 		      		  
% 		\end{tabular}
% 		\end{center}
% 		the last rule used to derive $L_{k} \xrightarrow{\tau} Q$ can be $Par1L$ or $Com4$:
% 		\begin{center}
% 		\begin{tabular}{ll}
% 		  $\inferrule* [left=\bf{Par1L}]{
% 		      L_{k}^{'} \stackrel{\tau}{\longmapsto} Q_{1}
% 		  }{
% 		    L_{k}^{'}|Q_{2} \stackrel{\tau}{\longmapsto} Q_{1}|Q_{2}
% 		  }$ 		      		  
% 		&
% 		  $\inferrule* [left=\bf{Com4L}]{
% 		      L_{k}^{'} \stackrel{\overline{a}b}{\longmapsto} Q_{1}
% 		    \\
% 		      P_{k}^{'} \stackrel{ab}{\longmapsto} Q_{2}
% 		  }{
% 		    L_{k}^{'}|P_{k}^{'}
% 		      \stackrel{\tau}{\longmapsto} 
% 			Q_{1}|Q_{2}
% 		  }$ 		      		  
% 		\end{tabular}
% 		\end{center}
% 
% 		    We derive the following chain of transition:
% 		    \begin{center}
% 		      $P_{1} 
% 			\stackrel{\epsilon}{\longmapsto} 
% 			  L_{1}^{'} 
% 			    \stackrel{\epsilon}{\longmapsto} 
% 			      L_{2}^{'} 
% 				\cdots 
% 				  L_{k-1}^{'} 
% 				    \stackrel{\epsilon}{\longmapsto} 
% 				      L_{k}^{'}
% 					\stackrel{\tau}{\longmapsto} 
% 					  Q_{1}$
% 		    \end{center}
% 		    for inductive hypothesis $P_{1} \xrightarrow{\sigma} Q_{1}$. A proof of the conclusion is
% 		    \begin{center}
% 		      $\inferrule* [left=\bf{EComSeq}]{
% 			  P_{1} \xrightarrow{xy \cdot \gamma_{2}\cdot \ldots \cdot \gamma_{k+1}} Q_{1}
% 			\\
% 			  P_{2}\xrightarrow{\overline{x}y} P_{2}^{'}
% 		      }{
% 			P_{1}|P_{2} \xrightarrow{\gamma_{2}\cdot \ldots \cdot \gamma_{k+1}} Q_{1}|P_{2}^{'}
% 		      }$ 
% 		    \end{center}
% 		    and $\gamma_{2}\cdot \ldots \cdot \gamma_{k+1}=\sigma$ because the first action $\gamma_{1}$ is $\epsilon$.
% 		
% 	    \end{description}	    
%   \end{proof}
% \end{proposition}

