
The $\pi$ calculus is a mathematical model of processes whose interconnections change as they interact. The basic computational step is the transfer of a communications link between two processes. The idea that the names of the links belong to the same category as the transferred objects is one of the cornerstone of the calculus. The $\pi$ calculus allows channel names to be communicated along the channels themselves, and in this way it is able to describe concurrent computations whose network configuration may change during the computation.

A coverage of $\pi$ calculus is on \cite{parrow}, \cite{sangiorgiwalker} and \cite{milner}

\section{Syntax}

We suppose that we have a countable set of names $\mathbb{N}$, ranged over by lower case letters $a,b, \cdots, z$. This names are used for communication channels and values. Furthermore we have a set of identifiers, ranged over by $A$. We represent the agents or processes by upper case letters $P,Q, \cdots $. A process can perform the following actions:
\begin{center}
  $\pi$ ::= $\overline{x}y$ | $x(z)$ | $\tau$ 
\end{center}
The process are defined by the following grammar:
\begin{center}
  \begin{tabular}{l}
    $P,Q$ ::= $0$ | $\pi.P$ | $P|Q$ | $P+Q$ | $(\nu x) P$ | $A(y_{1}, \cdots, y_{n})$ 
  \end{tabular}
\end{center}
and they have the following intuitive meaning:
\begin{description}
  \item[$0$] 
    is the empty process, which cannot perform any actions
  \item[$\pi.P$] 
    is an action prefixing, this process can perform action $\pi$ e then behave like $P$, the action can be:
    \begin{description}
      \item[$\overline{x}y$] 
	is an output action, this sends the name $y$ along the name $x$. We can think about $x$ as a channel or a port, and about $y$ as an output datum sent over the channel
      \item[$x(z)$] 
	is an input action, this receives a name along the name $x$. $z$ is a variable which stores the received data.
      \item[$\tau$] 
	is a silent or invisible action, this means that a process can evolve to $P$ without interaction with the environment 
    \end{description}
  \item[$P+Q$] 
    is the sum, this process can enact either $P$ or $Q$
  \item[$P|Q$] 
    is the parallel composition, $P$ and $Q$ can execute concurrently and also syncronize with each other
  \item[$(\nu z) P$] 
    is the scope restriction. This process behave as $P$ but the name $z$ is local. This process cannot use the name $z$ to interact with other process but it can for communication within it.
  \item[$A(y_{1}, \cdots, y_{n})$] 
    is an identifier whose arity is $n$. Every identifier has a definition
    \begin{center}
      $A(x_{1}, \cdots, x_{n}) = P$
    \end{center}
    where the $x_{i}$ must be pairwise disjoint. The intuition is that if the $y_{i}$ replace the $x_{i}$ then $A(y_{1}, \cdots, y_{n})$ behave as $P\{y_{1}/x_{1}\} \cdots \{y_{n}/x_{n}\}$. 
\end{description}

To resolve ambiguity we can use parentheses and observe the conventions that prefixing and restriction bind more tightly than composition and prefixing binds more tightly than sum. 

\begin{definition} \index{binder} \index{bind} \index{name occurrence! bound} \index{scope}
  We say that the input prefix $x(z).P$ \emph{binds} $z$ in $P$ or is a \emph{binder} for $z$ in $P$. We also say that $P$ is the \emph{scope} of the binder and that any occurrence of $z$ in $P$ are \emph{bound} by the binder. Also the restriction operator $(\nu z)P$ is a binder for $z$ in $P$.
\end{definition}

\begin{definition} \index{$bn$}
  $bn(P)$ is the set of names that have a bound occurrence in $P$ and is defined as $B(P, \emptyset)$, where $B(P, I)$, with $I$ a set of process constants, is defined in table \ref{table:B}
\end{definition}

  \begin{table}
    \begin{tabular}{ll}
      \hline\\
	$B(0, I)\; =\; \emptyset$&$B(Q+R,I)\; =\; B(Q,I)\cup B(R,I)$
      \\\\
	$B(\overline{x}y.Q, I)\; =\; B(Q, I)$&$B(Q|R,I)\; =\; B(Q,I)\cup B(R,I)$
      \\\\
	$B(x(y).Q, I)\; =\; \{y,\overline{y}\}\cup B(Q, I)$&$B((\nu x)Q, I)\; =\; \{x, \overline{x}\}\cup B(Q, I)$
      \\\\
	$B(\tau.Q, I)\; =\; B(Q, I)$&
      \\\\
	\multicolumn{2}{l}{
	$B(A(x_{1},\cdots, x_{n}), I)=\left\{
	  \begin{array}{ll}
		B(Q, I\cup \{A\})\; where\; A\stackrel{def}{=}Q
	      &
		if\; A\notin I
	    \\
		\emptyset
	      &
		if\; A\in I
	  \end{array}\right.$}
      \\\hline
    \end{tabular}
    \caption{Bound occurrences}
    \label{table:B}
  \end{table}



\begin{definition} \index{name occurrence! free}
  We say that a name $x$ is \emph{free} in $P$ if $P$ contains a non bound occurrence of $x$. We write $fn(P)$ for the set of names with a free occurrence in $P$. $fn(P)$ is defined as $fn(P,\emptyset)$ where $fn(P, I)$, with $I$ a set of process constants, is defined in table \ref{F}
\end{definition}

  \begin{table}
    \begin{tabular}{ll}
      \hline\\
	$F(0, I)\; =\; \emptyset$&$F(Q+R,I)\; =\; F(Q,I)\cup F(R,I)$
      \\\\
	$F(\overline{x}y.Q, I)\; =\; \{x,\overline{x},y,\overline{y}\}\cup F(Q, I)$&$F(Q|R,I)\; =\; F(Q,I)\cup F(R,I)$
      \\\\
	$F(x(y).Q, I)\; =\; \{x,\overline{x}\}\cup (F(Q, I)-\{y,\overline{y}\})$&$F((\nu x)Q, I)\; =\; F(Q, I)-\{x,\overline{x}\}$
      \\\\
	$F(\tau.Q, I)\; =\; F(Q, I)$
      \\\\
	\multicolumn{2}{l}{
	$F(A(x_{1},\cdots, x_{n}), I)=\left\{
	  \begin{array}{ll}
		F(Q, I\cup \{A\})\; where\; A\stackrel{def}{=}Q
	      &
		if\; A\notin I
	    \\
		\emptyset
	      &
		if\; A\in I
	  \end{array}\right.$
	}
      \\\hline
    \end{tabular}
    \caption{Free occurrences}
    \label{F}
  \end{table}



\begin{definition} \index{n}
  $n(P)$ which is the set of all names in $P$ and is defined in the following way:
  \begin{center}
    $n(P)\; =\; fn(P)\cup bn(P)$
  \end{center}
\end{definition}



In a definition $A(x_{1}, \cdots, x_{n})=P$ we assume that $fn(P)\subseteq \{x_{1}, \cdots, x_{n}\}$. 

\begin{definition}\index{syntactic substitution}
  $P\{b/a\}$ is the syntactic substitution of name $b$ for a different name $a$ inside a $\pi$ calculus process, and it consists in replacing every free occurrences of $a$ with $b$. If $b$ is a bound name in $P$, in order to avoid name capture we perform an appropriate $\alpha$ conversion. $P\{b/a\}$ is defined in table \ref{syntacticsubstitution}
\end{definition}

  \begin{table}
    \begin{tabular}{l}
      \hline\\
	$0\{b/a\}\; =\; 0$
      \\\\
	$(\overline{x}y.Q)\{b/a\}\; =\; \overline{x}\{b/a\}y\{b/a\}.Q\{b/a\}$
      \\\\
	$(x(y).Q)\{b/a\}\; =\; x\{b/a\}(y).Q\{b/a\}$ if $y\neq a$ and $y\neq b$
      \\\\
	$(x(a).Q)\{b/a\}\; =\; x\{b/a\}(a).Q$
      \\\\
	$(x(b).Q)\{b/a\}\; =\; x\{b/a\}(c).((Q\{c/b\})\{b/a\})$ where $c\notin n(Q)$
      \\\\
	$(\tau.Q)\{b/a\}\; =\; \tau.Q\{b/a\}$
      \\\\
	$(A(x_{1},\cdots, x_{n}))\{b/a\}=\left\{
	  \begin{array}{ll}
		A
	      &
		if\; a\notin fn(A)
	    \\
		A_{\{b/a\}}\; where\; A_{\{b/a\}}=Q\{b/a\}\; and\; A\stackrel{def}{=}Q
	      &
		if\; a\in fn(A)
	  \end{array}\right.$
      \\\\
	$(Q+R)\{b/a\}\; =\; Q\{b/a\} + R\{b/a\}$
      \\\\
	$(Q|R)\{b/a\}\; =\; Q\{b/a\} | R\{b/a\}$
      \\\\
	$((\nu y)Q)\{b/a\}\; =\;(\nu y)Q\{b/a\}$ if $y\neq a$ and $y\neq b$
      \\\\
	$((\nu a)Q)\{b/a\}\; =\;(\nu a)Q$
      \\\\
	$((\nu b)Q)\{b/a\}\; =\;(\nu c)((Q\{c/b\})\{b/a\})$ where $c\notin n(Q)$ if $a\in fn(Q)$ 
      \\\\
	$((\nu b)Q)\{b/a\}\; =\;(\nu b)Q$ if $a\notin fn(Q)$
      \\\hline
    \end{tabular}
    \caption{Syntatic substitution}
    \label{syntacticsubstitution}
  \end{table}



\section{Operational Semantic(without structural congruence)}
\subsection{Early operational semantic(without structural congruence)}
The semantic of a $\pi$ calculus process is a labeled transition system such that:
\begin{itemize}
  \item 
    the nodes are $\pi$ calculus process. The set of node is $\mathbb{P}$
  \item
    the actions can be:
    \begin{itemize}
      \item unbound input $xy$
      \item unbound output $\overline{x}y$
      \item the silent action $\tau$
      \item bound output $\overline{x}(y)$
    \end{itemize}
    The set of actions is $\mathbb{A}$, we use $\alpha$ to range over the set of actions.
  \item
    the transition relations is $\rightarrow\subseteq \mathbb{P}\times \mathbb{A}\times \mathbb{P}$
\end{itemize}
In the following section we present the early semantic without structural congruence and without $alpha$ conversion. We call this semantic early because in the rule $ECom$
\begin{center}
  \begin{tabular}{c}
    $P \xrightarrow{xy} P^{'}\;\; Q\xrightarrow{\overline{x}y} Q^{'}$\\
    \hline
    $P|Q \xrightarrow{\tau} P^{'}|Q^{'}$
  \end{tabular}
\end{center}
there is no substitution, instead the substitution occurs at an early point in the inference of this translation, namely during the inference of the input action. 

\begin{definition}\index{transition relation! early! without structural congruence}
  The \emph{early transition relation} $\rightarrow\subseteq \mathbb{P}\times \mathbb{A} \times \mathbb{P}$ is the smallest relation induced by the rules in table \ref{transitionrelationearlywithoutstructuralcongruence}.

  \begin{table}
    \begin{tabular}{ll}  
      \hline\\
	  \bf{Out}
	  \begin{tabular}{c}
	      $\;\;$
	    \\\hline
	      $\overline{x}y.P \xrightarrow{\overline{x}y} P$
	  \end{tabular}
	&
	  \bf{EInp}
	  \begin{tabular}{c}
	    \\\hline
	      $x(y).P \xrightarrow{xz} P\{z/y\}$
	  \end{tabular}
      \\\\
	  \bf{ParL}
	  \begin{tabular}{c}
	      $P \xrightarrow{\alpha} P^{'}\;\; bn(\alpha)\cap fn(Q)=\emptyset$
	    \\\hline
	      $P|Q \xrightarrow{\alpha} P^{'}|Q$
	  \end{tabular}
	&
	  \bf{ParR}
	  \begin{tabular}{c}
	      $Q \xrightarrow{\alpha} Q^{'}\;\; bn(\alpha)\cap fn(Q)=\emptyset$
	    \\\hline
	      $P|Q \xrightarrow{\alpha} P|Q^{'}$
	  \end{tabular}
      \\\\
	  \bf{SumL}
	  \begin{tabular}{c}
	      $P \xrightarrow{\alpha} P^{'}$
	    \\\hline
	      $P+Q \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
	&
	  \bf{SumR}
	  \begin{tabular}{c}
	      $Q \xrightarrow{\alpha} Q^{'}$
	    \\\hline
	      $P+Q \xrightarrow{\alpha} Q^{'}$
	    \end{tabular}
      \\\\
	  \bf{Res}
	  \begin{tabular}{c}
	      $P \xrightarrow{\alpha} P^{'}\;\; z\notin n(\alpha)$
	    \\\hline
	      $(\nu z) P \xrightarrow{\alpha} (\nu z) P^{'}$
	  \end{tabular}
	&
	  \bf{ResAlp}
	  \begin{tabular}{c}
	      $(\nu w)P\{w/z\} \xrightarrow{xz} P^{'}\;\; w\notin n(P)$
	    \\\hline
	      $(\nu z) P \xrightarrow{xz} P^{'}$
	  \end{tabular}
      \\\\
	  \bf{EComR}
	  \begin{tabular}{c}
	      $P \xrightarrow{\overline{x}y} P^{'}\;\; Q\xrightarrow{xy} Q^{'}$
	    \\\hline
	      $P|Q \xrightarrow{\tau} P^{'}|Q^{'}$
	  \end{tabular}
	&
	  \bf{EComL}
	  \begin{tabular}{c}
	      $P \xrightarrow{xy} P^{'}\;\; Q\xrightarrow{\overline{x}y} Q^{'}$
	    \\\hline
	      $P|Q \xrightarrow{\tau} P^{'}|Q^{'}$
	  \end{tabular}
      \\\\
	    \bf{ClsL}
	    \begin{tabular}{c}
		$P \xrightarrow{\overline{x}(z)} P^{'}$  
		$Q \xrightarrow{xz} Q^{'}$ 
		$z\notin fn(Q)$
	      \\\hline
		$P|Q \xrightarrow{\tau} (\nu z)(P^{'}|Q^{'})$
	    \end{tabular}
	&
	    \bf{ClsR}
	    \begin{tabular}{c}
		$P \xrightarrow{xz} P^{'}$  
		$Q \xrightarrow{\overline{x}(z)} Q^{'}$ 
		$z\notin fn(P)$
	      \\\hline
		$P|Q \xrightarrow{\tau} (\nu z)(P^{'}|Q^{'})$
	    \end{tabular}
      \\\\
	  \bf{Cns}
	  \begin{tabular}{c}
	      $A(\tilde{x}) \stackrel{def}{=} P\; P\{\tilde{y}/\tilde{x}\} \xrightarrow{\alpha} P^{'}$
	    \\\hline
	      $A(\tilde{y}) \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
	&
	  \bf{Tau}
	  \begin{tabular}{c}
	      $\;\;$
	    \\\hline
	      $\tau.P \xrightarrow{\tau} P$
	  \end{tabular}
      \\\\
	  \bf{Opn}
	  \begin{tabular}{c}
	      $P \;\xrightarrow{\overline{x}z} P^{'}\;\; z\neq x$
	    \\\hline
	      $(\nu z) P \;\xrightarrow{\overline{x}(z)} P^{'}$
	  \end{tabular}
	&
% 	    $
% 	      \inferrule* [left=OpnAlp]{
% 		  y\notin n(R)
% 		\\
% 		  R\xrightarrow{\overline{x}z}_{1}R^{'}
% 		\\
% 		  z\notin bn(R)
% 	      }{
% 		(\nu y)R\{y/z\}\xrightarrow{\overline{x}(z)}_{1}R^{'}
% 	      }
% 	    $
      \\\hline
    \end{tabular}
    \caption{Early transition relation without structural congruence}
    \label{transitionrelationearlywithoutstructuralcongruence}
  \end{table}
\end{definition}

\begin{example}
  We show now an example of the so called scope extrusion, in particular we prove that
  \begin{center}
    $a(x).P\; |\; (\nu b)\overline{a}b.Q\; \xrightarrow{\tau}\; (\nu b) (P\{b/x\}\; |\; Q)$
  \end{center}
  where we suppose that $b\notin fn(P)$. In this example the scope of $(\nu b)$ moves from the right hand component to the left hand.
  \[
    \inferrule* [left=CloseR] {
	\inferrule* [left=Einp] {
	}{
	  a(x).P\; \xrightarrow{ab} P\{b/x\}
	}
      \\
	\inferrule* [left=Opn] {
	    \inferrule* [left=Out]{
	    }{
	      \overline{a}b.Q\; \xrightarrow{\overline{a}b} Q
	    }
	  \\
	    a\neq b
	}{
	  (\nu b)\overline{a}b.Q\; \xrightarrow{\overline{a}(b)} Q
	}
      \\
	b\notin fn((\nu b)\overline{a}b.Q)
    }{
      a(x).P\; |\; (\nu b)\overline{a}b.Q\; \xrightarrow{\tau}\; (\nu b) (P\{b/x\}\; |\; Q)
    }
  \]

\end{example}


\begin{example}
    We want to prove now that:
    \begin{center}
      $((\nu b) a(x).P)\; |\; \overline{a}b.Q\; 
	\xrightarrow{\tau}\; 
	((\nu c) (P\{c/b\}\{b/x\})) | Q$
    \end{center}
    where $b\notin bn(P)$
    \[
	    \inferrule* [left=ResAlp] {
		\inferrule* [left=Res] {
		    \inferrule* [left=EInp]{
		    }{
		      (a(x).P)\{c/b\}\;
			\xrightarrow{ab}\;
			  P\{c/b\}\{b/x\}
		    }
		  \\
		    c\notin n(a(b))
		}{
		  (\nu c)((a(x).P)\{c/b\})\;
		    \xrightarrow{ab}\;
		      (\nu c)(P\{c/b\}\{b/x\})
		}
	      \\
		b\notin n((a(x).P)\{c/b\})
	    }{
	      (\nu b) a(x).P\; 
		\xrightarrow{ab}\; 
		  (\nu c) P\{c/b\}\{b/x\}
	    }
    \]

      \[
  	\inferrule* [left=EComL] {
  	      (\nu b) a(x).P\; 
		\xrightarrow{ab}\; 
		  (\nu c) P\{c/b\}\{b/x\}
  	  \\
  	    \inferrule* [left=EOut] {
  	    }{
  	      \overline{a}b.Q\; 
		\xrightarrow{\overline{a}b}\; 
		  Q
  	    }
  	}{
	  ((\nu b) a(x).P)\; |\; \overline{a}b.Q\; 
	    \xrightarrow{\tau}\; 
	      ((\nu c) (P\{c/b\}\{b/x\})) | Q
  	}
      \]
\end{example}


% \begin{example}
%   Now we prove that
%   \[
%     \inferrule* [left=Com]{
% 	\overline{a}x.c(x).0|b(x).0\;
% 	  \xrightarrow{\overline{a}x}\;
% 	      c(x).0|b(x).0
%       \\
% 	a(x).0|\overline{b}x.\overline{c}x.0\;
% 	  \xrightarrow{ax}\;
% 	    0|\overline{b}x.\overline{c}x.0
%     }{
%        (\overline{a}x.c(x).0|b(x).0)|(a(x).0|\overline{b}x.\overline{c}x.0)\; 
%  	\xrightarrow{\tau}\; 
%  	  (c(x).0|b(x).0)|(0|\overline{b}x.\overline{c}x.0)
% %        (\overline{a}x.c(x).0|b(x).0)|(a(x).0|\overline{b}x.\overline{c}x.0)\; 
% %  	\xrightarrow{\tau}\; 
% %  	  (0|0)|(0|0)
%     }
%   \]
%   
% \end{example}






\subsection{Late operational semantic(without structural congruence)}


In this case the set of actions $\mathbb{A}$ contains
\begin{itemize}
      \item bound input $x(y)$
      \item unbound output $\overline{x}y$
      \item the silent action $\tau$
      \item bound output $\overline{x}(y)$
\end{itemize}


\begin{definition}\index{transition relation! pi! late! without structural congruence}
  The \emph{late transition relation without structural congruence} $\rightarrow\subseteq \mathbb{P}\times \mathbb{A} \times \mathbb{P}$ is the smallest relation induced by the rules in table \ref{transitionrelationpilatewithoutstructuralcongruence}.
  \begin{table}
    \begin{tabular}{ll}
      \hline\\
	  \bf{LInp}
	  \begin{tabular}{c}
 	    $z\notin fn(P)$
	    \\\hline
 	    $x(y).P \xrightarrow{x(z)} P\{z/y\}$
	  \end{tabular}
	&
	  \bf{Res}
	  \begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}$ $z\notin n(\alpha)$
	      \\\hline
	    $(\nu z) P \xrightarrow{\alpha} (\nu z) P^{'}$
	  \end{tabular}    
      \\\\
	  \bf{SumL}
	  \begin{tabular}{c}
	      $P \xrightarrow{\alpha} P^{'}$
	    \\\hline
	      $P+Q \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
	&
	  \bf{SumR}
	  \begin{tabular}{c}
	      $Q \xrightarrow{\alpha} Q^{'}$
	    \\\hline
	      $P+Q \xrightarrow{\alpha} Q^{'}$
	  \end{tabular}
      \\\\
	  \bf{ParL}
	  \begin{tabular}{c}
	      $P \xrightarrow{\alpha} P^{'}\;\; bn(\alpha)\cap fn(Q)=\emptyset$
	    \\\hline
	      $P|Q \xrightarrow{\alpha} P^{'}|Q$
	  \end{tabular}
	&
	  \bf{ParR}
	  \begin{tabular}{c}
	      $Q \xrightarrow{\alpha} Q^{'}\;\; bn(\alpha)\cap fn(Q)=\emptyset$
	    \\\hline
	      $P|Q \xrightarrow{\alpha} P|Q^{'}$
	  \end{tabular}
      \\\\
	  \bf{ComL}
	  \begin{tabular}{c}
	      $P \xrightarrow{x(y)} P^{'}\;\; Q\xrightarrow{\overline{x}(z)} Q^{'}$
	    \\\hline
	      $P|Q \xrightarrow{\tau} P^{'}\{z/y\}|Q^{'}$
	  \end{tabular}	
	&
	  \bf{ComR}
	  \begin{tabular}{c}
	      $P \xrightarrow{\overline{x}(z)} P^{'}\;\; Q\xrightarrow{x(y)} Q^{'}$
	    \\\hline
	      $P|Q \xrightarrow{\tau} P^{'}|Q^{'}\{z/y\}$
	  \end{tabular}	
      \\\\
	  \bf{Opn}
	  \begin{tabular}{c}
	      $P \xrightarrow{\overline{x}z} P^{'}\;\; z\neq x$
	    \\\hline
	      $(\nu z) P \xrightarrow{\overline{x}(z)} P^{'}$
	  \end{tabular}
	&
	  \bf{Out}
	  \begin{tabular}{c}
	    \hline
	    $\overline{x}y.P \xrightarrow{\overline{x}y} P$
	  \end{tabular}
      \\\\
	  \bf{ClsL}
	  \begin{tabular}{c}
	      $P\; \xrightarrow{\overline{x}(z)}\; P^{'}$  $Q \xrightarrow{xz} Q^{'}$ $z\notin fn(Q)$
	    \\\hline
	      $P|Q\; \xrightarrow{\tau}\; (\nu z)(P^{'}|Q^{'})$
	  \end{tabular}
	&
	  \bf{ClsR}
	  \begin{tabular}{c}
	      $P \xrightarrow{xz} P^{'}$  $Q \xrightarrow{\overline{x}(z)} Q^{'}$ $z\notin fn(P)$
	    \\\hline
	      $P|Q \xrightarrow{\tau} (\nu z)(P^{'}|Q^{'})$
	  \end{tabular}
      \\\\
	  \bf{Tau}
	  \begin{tabular}{c}
	    \hline
	      $\tau.P \xrightarrow{\tau} P$
	  \end{tabular}
	&
	  \bf{Cns}
	  \begin{tabular}{c}
	    $A(\tilde{x}) \stackrel{def}{=} P\; P\{\tilde{y}/\tilde{x}\} \xrightarrow{\alpha} P^{'}$
	      \\\hline
	    $A(\tilde{y}) \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
      \\\hline
    \end{tabular}
    \caption{Late semantic without structural congruence}
    \label{transitionrelationpilatewithoutstructuralcongruence}
  \end{table}
\end{definition}





\section{Structural congruence}

Structural congruences are a set of equations defining equality and congruence relations on process. They can be used in combination with an SOS semantic for languages. In some cases structural congruences help simplifying the SOS rules: for example they can capture inherent properties of composition operators(e.g. commutativity, associativity and zero element). Also, in process calculi, structural congruences let processes interact even in case they are not adjacent in the syntax. There is a possible trade off between what to include in the structural congruence and what to include in the transition rules: for example in the case of the commutativity of the sum operator. It is worth noticing that in most process calculi every structurally congruent processes should never be distinguished and thus any semantic must assign them the same behaviour.

\begin{definition}
  A \emph{change of bound names} in a process $P$ is the replacement of a subterm $x(z).Q$ of $P$ by $x(w).Q\{w/z\}$ or the replacement of a subterm $(\nu z)Q$ of $P$ by $(\nu w)Q\{w/z\}$ where in each case $w$ does not occur in $Q$.
\end{definition}

\begin{definition}
  Processes $P$ and $Q$ are \emph{$\alpha$ convertible} if $Q$ can be obtained from $P$ by a finite number of changes of bound names. If $P$ and $Q$ are $\alpha$ convertible we write $P\equiv_{\alpha}Q$
\end{definition}

\begin{lemma}{\emph{inversion lemma}}
  In the proof of equivalence of the semantics in the next section we need this lemma of inversion of the $\alpha$ conversion relation.
  \begin{itemize}
    \item 
      If $P\equiv_{\alpha} Q$ then $P$ and $Q$ have the same operator at the top level. 
    \item
      If $P\equiv_{\alpha} \tau.Q$ then $P=\tau.P_{1}$ for some $P_{1}$ such that $P_{1}\equiv_{\alpha}Q$
    \item
      If $P\equiv_{\alpha} \overline{x}y.Q$ then $P=\overline{x}y.P_{1}$ for some $P_{1}$ such that $P_{1}\equiv_{\alpha}Q$
    \item
      If $P\equiv_{\alpha} x(y).Q$ then $P=x(z).P_{1}$ for some $P_{1}$ such that $P_{1}\{z/y\}\equiv_{\alpha}Q$, or $P=x(y).P_{1}$ for some $P_{1}$ such that $P_{1}\equiv_{\alpha}Q$.
    \item
      If $P\equiv_{\alpha} Q_{1}+Q_{2}$ then $P=P_{1}+P_{2}$ for some $P_{1}$ and $P_{2}$ such that $P_{1}\equiv_{\alpha}Q_{1}$ and $P_{2}\equiv_{\alpha}Q_{2}$.
    \item 
      If $P\equiv_{\alpha} Q_{1}|Q_{2}$ then $P=P_{1}|P_{2}$ for some $P_{1}$ and $P_{2}$ such that $P_{1}\equiv_{\alpha}Q_{1}$ and $P_{2}\equiv_{\alpha}Q_{2}$.
    \item 
      If $P\equiv_{\alpha} (\nu y)Q$ then $P=(\nu z)P_{1}$ such that $P_{1}\{z/y\}\equiv_{\alpha}Q$, or $P=(\nu y).P_{1}$ for some $P_{1}$ such that $P_{1}\equiv_{\alpha}Q$.
    \item 
      caso degli identificatori?
  \end{itemize}

\end{lemma}



\begin{definition}\index{context}
  A \emph{context} $C[\cdot]$ is a process with a placeholder. If $C[\cdot]$ is a context and we replace the placeholder with $P$, than we obtain $C[P]$. In doing so, we make no $\alpha$ conversions.
\end{definition}


\begin{definition}\index{congruence}
  A \emph{congruence} is a binary relation on processes such that:
  \begin{itemize}
    \item 
      $S$ is an equivalence relation
    \item 
      $S$ is preserved by substitution in contexts: for each pair of processes $(P, Q)$ and for each context $C[\cdot]$
      \begin{center}
	$(P,Q)\in S\; \Rightarrow\; (C[P], C[Q])\in S$
      \end{center}
  \end{itemize}
\end{definition}

% \begin{definition}\label{congruenza strutturale}
%   As stated in \cite{mousavireniers}, a \emph{structural congruence} is the minimal congruence on processes that satisify the following property:
% \end{definition}

\begin{definition}\index{structural congruence}
  We define a \emph{structural congruence $\equiv$} as the smallest congruence on processes that satisfies the axioms in table \ref{structuralcongrunce}
  \begin{table}
    \begin{tabular}{lll}
      \hline\\
	SC-ALP&$\begin{array}{c}P \equiv_{\alpha} Q\\\overline{P\equiv Q}\end{array}$&$\alpha$ conversion
      \\\\
	\multicolumn{3}{l}{abelian monoid laws for sum:}
      \\
	SC-SUM-ASC& $M_{1}+(M_{2}+M_{3})\equiv (M_{1}+M_{2})+M_{3}$ &associativity
      \\
	SC-SUM-COM& $M_{1}+M_{2}\equiv M_{2}+M_{1}$ &commutativity
      \\
	SC-SUM-INC& $M+0\equiv M$&zero element
      \\\\
	\multicolumn{3}{l}{abelian monoid laws for parallel:}
      \\
	SC-COM-ASC& $P_{1}|(P_{2}|P_{3})\equiv (P_{1}|P_{2})|P_{3}$ &associativity
      \\
	SC-COM-COM& $P_{1}|P_{2}\equiv P_{2}|P_{1}$ &commutativity
      \\
	SC-COM-INC& $P|0\equiv P$&zero element
      \\\\
	\multicolumn{3}{l}{scope extension laws:}
      \\
	SC-RES& $(\nu z) (\nu w) P \equiv (\nu w) (\nu z) P$ &
      \\
	SC-RES-INC& $(\nu z) 0 \equiv 0$ &
      \\
	SC-RES-COM& $(\nu z) (P_{1}|P_{2}) \equiv P_{1}|(\nu z) P_{2}$ if $z\notin fn(P_{1})$&
      \\
	SC-RES-SUM& $(\nu z) (P_{1}+P_{2}) \equiv P_{1}+(\nu z) P_{2}$ if $z\notin fn(P_{1})$&
      \\\\
	\multicolumn{3}{l}{unfolding law:}
      \\
	SC-IDE&$A(\tilde{y})\equiv P\{\tilde{y}/\tilde{x}\}$&if $A(\tilde{x})\stackrel{def}{=}P$
      \\\hline
    \end{tabular}
    \caption{Structural congruence axioms}
    \label{structuralcongrunce}
  \end{table}
\end{definition}

We can make some clarification on the axioms of the structural congruence:
\begin{description}
  \item[$unfolding$] 
    this just helps replace an identifier by its definition, with the appropriate parameter instantiation. The alternative is to use an appropriate SOS rule: 
    \begin{center}
	  \bf{Cns}
	  \begin{tabular}{c}
	      $A(\tilde{x}) \stackrel{def}{=} P\; P\{\tilde{y}/\tilde{x}\} \xrightarrow{\alpha} P^{'}$
	    \\\hline
	      $A(\tilde{y}) \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
    \end{center}
  \item[$\alpha\; conversion$]
    is the $\alpha$ conversion, i.e., the choice of bound names, it identifies agents like $x(y).\overline{z}y$ and $x(w).\overline{z}w$. In the semantic of pi calculus we can use the structural congruence with the rule SC-ALP or the we can embed the $\alpha$ conversion in the SOS rules. 
    In the early case the rule for input takes care of $\alpha$ conversion, whether in the late case the rule for communication is in charge for $\alpha$ conversion.
    But this works only for one binder: the input prefix. 
  \item[$abelian\; monoidal\; properties\; of\; some\; operators$]
    We can deal with associativity and commutativity properties of sum and parallel composition by using SOS rules or by axiom of the structural congruence. For example the commutativity of the sum can be expressed by the following two rules:
    \begin{center}
      \begin{tabular}{cc}
	\bf{SumL}
	  \begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}$\\
	    \hline
	    $P+Q \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
	 &
	 \bf{SumR}
	   \begin{tabular}{c}
	    $Q \xrightarrow{\alpha} Q^{'}$\\
	    \hline
	    $P+Q \xrightarrow{\alpha} Q^{'}$
	   \end{tabular}
      \end{tabular}
    \end{center}
  or by the following rule and axiom:
    \begin{center}
      \begin{tabular}{cc}
	\bf{Sum}
	  \begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}$\\
	    \hline
	    $P+Q \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
	 &
	 \bf{SC-SUM}
	   \begin{tabular}{c}
	    $P+Q \equiv Q+P$
	   \end{tabular}
      \end{tabular}
    \end{center}
    and the rule $Str$
  \item[$scope\; extension\; laws$]
    We can use this scope extension laws or the rules $Opn$ and $Cls$ to deal with the scope extension.
\end{description}





\section{Operational semantic with structural congruence}

\subsection{Early semantic with $\alpha$ conversion only}
In this subsection we introduce the early operational semantic for $\pi$ calculus with the use of a minimal structural congruence, specifically we exploit only the easy of $\alpha$ conversion.

\begin{definition}\index{transition relation! early! with $\alpha$ conversion}
  The \emph{early transition relation with $\alpha$ conversion} $\rightarrow\subseteq \mathbb{P}\times \mathbb{A} \times \mathbb{P}$ is the smallest relation induced by the rules in table \ref{transitionrelationearlywithalphaconversion}.

  \begin{table}
    \begin{tabular}{ll}  
      \hline\\
	  \bf{Out}
	  \begin{tabular}{c}
	      $\;\;$
	    \\\hline
	      $\overline{x}y.P \xrightarrow{\overline{x}y} P$
	  \end{tabular}
	&
	  \bf{EInp}
	  \begin{tabular}{c}
	    \\\hline
	      $x(y).P \xrightarrow{xz} P\{z/y\}$
	  \end{tabular}
      \\\\
	  \bf{ParL}
	  \begin{tabular}{c}
	      $P \xrightarrow{\alpha} P^{'}\;\; bn(\alpha)\cap fn(Q)=\emptyset$
	    \\\hline
	      $P|Q \xrightarrow{\alpha} P^{'}|Q$
	  \end{tabular}
	&
	  \bf{ParR}
	  \begin{tabular}{c}
	      $Q \xrightarrow{\alpha} Q^{'}\;\; bn(\alpha)\cap fn(Q)=\emptyset$
	    \\\hline
	      $P|Q \xrightarrow{\alpha} P|Q^{'}$
	  \end{tabular}
      \\\\
	  \bf{SumL}
	  \begin{tabular}{c}
	      $P \xrightarrow{\alpha} P^{'}$
	    \\\hline
	      $P+Q \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
	&
	  \bf{SumR}
	  \begin{tabular}{c}
	      $Q \xrightarrow{\alpha} Q^{'}$
	    \\\hline
	      $P+Q \xrightarrow{\alpha} Q^{'}$
	    \end{tabular}
      \\\\
	  \bf{Res}
	  \begin{tabular}{c}
	      $P \xrightarrow{\alpha} P^{'}\;\; z\notin n(\alpha)$
	    \\\hline
	      $(\nu z) P \xrightarrow{\alpha} (\nu z) P^{'}$
	  \end{tabular}
	&
	  \bf{Alp}
	  \begin{tabular}{c}
	      $P\equiv_{\alpha}Q\; P\xrightarrow{\alpha}P^{'}$
	    \\\hline
	      $Q\xrightarrow{\alpha}P^{'}$
	  \end{tabular}
      \\\\
	  \bf{EComL}
	  \begin{tabular}{c}
	      $P \xrightarrow{xy} P^{'}\;\; Q\xrightarrow{\overline{x}y} Q^{'}$
	    \\\hline
	      $P|Q \xrightarrow{\tau} P^{'}|Q^{'}$
	  \end{tabular}
	&
	  \bf{EComR}
	  \begin{tabular}{c}
	      $P \xrightarrow{\overline{x}y} P^{'}\;\; Q\xrightarrow{xy} Q^{'}$
	    \\\hline
	      $P|Q \xrightarrow{\tau} P^{'}|Q^{'}$
	  \end{tabular}
      \\\\
	    \bf{ClsL}
	    \begin{tabular}{c}
		$P \xrightarrow{\overline{x}(z)} P^{'}$  
		$Q \xrightarrow{xz} Q^{'}$ 
		$z\notin fn(Q)$
	      \\\hline
		$P|Q \xrightarrow{\tau} (\nu z)(P^{'}|Q^{'})$
	    \end{tabular}
	&
	    \bf{ClsR}
	    \begin{tabular}{c}
		$P \xrightarrow{xz} P^{'}$  
		$Q \xrightarrow{\overline{x}(z)} Q^{'}$ 
		$z\notin fn(P)$
	      \\\hline
		$P|Q \xrightarrow{\tau} (\nu z)(P^{'}|Q^{'})$
	    \end{tabular}
      \\\\
	  \bf{Cns}
	  \begin{tabular}{c}
	      $A(\tilde{x}) \stackrel{def}{=} P\; P\{\tilde{y}/\tilde{x}\} \xrightarrow{\alpha} P^{'}$
	    \\\hline
	      $A(\tilde{y}) \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
	&
	  \bf{Opn}
	  \begin{tabular}{c}
	      $P \;\xrightarrow{\overline{x}z} P^{'}\;\; z\neq x$
	    \\\hline
	      $(\nu z) P \;\xrightarrow{\overline{x}(z)} P^{'}$
	  \end{tabular}
      \\\\
	  \bf{Tau}
	  \begin{tabular}{c}
	      $\;\;$
	    \\\hline
	      $\tau.P \xrightarrow{\tau} P$
	  \end{tabular}
	&
      \\\hline
    \end{tabular}
    \caption{Early transition relation with $\alpha$ conversion}
    \label{transitionrelationearlywithalphaconversion}
  \end{table}
\end{definition}



\subsection{Early semantic with structural congruence}

\begin{definition}\index{transition relation! pi! early! with structural congruence}
  The \emph{early transition relation with structural congruence} $\rightarrow\subseteq \mathbb{P}\times \mathbb{A} \times \mathbb{P}$ is the smallest relation induced by the rules in table \ref{earlysemanticwithstructuralcongruence}.

  \begin{table}
    \begin{tabular}{lll}
      \hline\\
	  \bf{Out}
	  \begin{tabular}{c}
	    \hline
	    $\overline{x}y.P \xrightarrow{\overline{x}y} P$
	  \end{tabular}
	  &
	  \bf{EInp}
	  \begin{tabular}{c}
	    \hline
	    $x(z).P \xrightarrow{xy} P\{y/z\}$
	  \end{tabular}
	  &
	  \bf{Par}
	  \begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}\;\; bn(\alpha)\cap fn(Q)=\emptyset$\\
	    \hline
	    $P|Q \xrightarrow{\alpha} P^{'}|Q$
	  \end{tabular}
      \\\\
	  \bf{Sum}
	  \begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}$\\
	    \hline
	    $P+Q \xrightarrow{\alpha} P^{'}$
	  \end{tabular}
	  &
	    \bf{ECom}
	    \begin{tabular}{c}
	      $P \xrightarrow{xy} P^{'}\;\; Q\xrightarrow{\overline{x}y} Q^{'}$\\
	      \hline
	      $P|Q \xrightarrow{\tau} P^{'}|Q^{'}$
	    \end{tabular}
	  &
	  \bf{Res}
	  \begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}\;\; z\notin n(\alpha)$\\
	    \hline
	    $(\nu z) P \xrightarrow{\alpha} (\nu z) P^{'}$
	  \end{tabular}
      \\\\
	  \bf{Tau}
	  \begin{tabular}{c}
	    \hline
	    $\tau.P \xrightarrow{\tau} P$
	  \end{tabular}
	  &
	  \bf{Opn}
	  \begin{tabular}{c}
	    $P \xrightarrow{\overline{x}z} P^{'}\;\; z\neq x$\\
	    \hline
	    $(\nu z) P \xrightarrow{\overline{x}(z)} P^{'}$
	  \end{tabular}
	  &
	  \bf{Str}
	  \begin{tabular}{c}
	    $P\equiv P^{'}\;\; P\xrightarrow{\alpha} Q\;\; Q\equiv Q^{'}$\\
	    \hline
	    $P^{'} \xrightarrow{\alpha} Q^{'}$
	  \end{tabular}
      \\\hline
    \end{tabular}
    \caption{Early semantic with structural congruence}
    \label{earlysemanticwithstructuralcongruence}
  \end{table}
\end{definition}


\begin{example}
  We prove now that
  \begin{center}
    $a(x).P\; |\; (\nu b)\overline{a}b.Q\; \xrightarrow{\tau}\; (\nu b)(P\{b/x\}\; |\; Q)$
  \end{center}
  where $b\notin fn(P)$.
  This follows from
  \[
    a(x).P\; |\; (\nu b)\overline{a}b.Q\; \equiv\; (\nu b)(a(x).P\; |\; \overline{a}b.Q)
  \]
  and
  \[
    (\nu b)(a(x).P\; |\; \overline{a}b.Q) \xrightarrow{\tau} (\nu b)(P\{b/x\}\; |\; Q)
  \]
  with the rule $Str$. We can prove the last transition in the following way:
  \[
    \inferrule* [left=Res] {
      \inferrule* [left=Com] {
	  \inferrule* [left=EInp] {
	  }{
	    a(x).P\; \xrightarrow{ab}\; P\{b/x\}
	  }
	\\
	  \inferrule* [left=Out] {
	  }{
	    \overline{a}b.Q\; \xrightarrow{\overline{a}b}\; Q
	  }
      }{
	a(x).P\; |\; \overline{a}b.Q\; \xrightarrow{\tau}\; P\{b/x\}\; |\; Q
      }
    }{
      (\nu b)(a(x).P\; |\; \overline{a}b.Q)\; \xrightarrow{\tau}\; (\nu b)(P\{b/x\}\; |\; Q)
    }
  \]

\end{example}

\begin{example}
    We want to prove now that:
    \begin{center}
      $((\nu b) a(x).P)\; |\; \overline{a}b.Q\; \xrightarrow{\tau}\; (\nu c) (P\{c/b\}\{b/x\}\; |\; Q)$
    \end{center}
    where the name $c$ is not in the free names of $Q$. We can exploit the structural congruence and get that
    \[
      ((\nu b) a(x).P) | \overline{a}b.Q\; \equiv\; (\nu c) (a(x).(P\{c/b\}) | \overline{a}b.Q)     
    \]
    then we have
    \[
	\inferrule* [left=Res] {
	  \inferrule* [left=Com]{
	      \inferrule* [left=EInp]{
	      }{
		a(x).P\{c/b\}\; \xrightarrow{ab}\; P\{c/b\}\{b/x\}
	      }
	    \\
	      \inferrule* [left=Out]{
	      }{
		\overline{a}b.Q\; \xrightarrow{\overline{a}b}\; Q
	      }
	  }{
	      (a(x).(P\{c/b\}) | \overline{a}b.Q)\; \xrightarrow{\tau}\; (P\{c/b\}\{b/x\} | Q)
	  }
	}{
	  (\nu c) (a(x).(P\{c/b\}) | \overline{a}b.Q)\; \xrightarrow{\tau}\; (\nu c) (P\{c/b\}\{b/x\} | Q)
	}
    \]
    Now we just apply the rule $Str$ to prove the thesis.
\end{example}



\subsection{Late semantic with structural congruence}

\begin{definition}\index{transition relation! pi! late! with structural congruence}
  The \emph{late transition relation with structural congruence} $\rightarrow\subseteq \mathbb{P}\times \mathbb{A} \times \mathbb{P}$ is the smallest relation induced by the rules in table \ref{latewith}.
  \begin{table}
    \begin{tabular}{ll}
	\hline\\
	\bf{Prf}
	\begin{tabular}{c}
	  \hline
	  $\alpha.P \xrightarrow{\alpha} P$
	\end{tabular}
      &
	\bf{Sum}
	\begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}$
	  \\\hline
	    $P+Q \xrightarrow{\alpha} P^{'}$
	\end{tabular}
    \\\\
	\bf{Par}
	\begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}\;\; bn(\alpha)\cap fn(Q)=\emptyset$
	  \\\hline
	    $P|Q \xrightarrow{\alpha} P^{'}|Q$
	\end{tabular}
      &
	\bf{Res}
	\begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}$ $z\notin n(\alpha)$
	  \\\hline
	    $(\nu z) P \xrightarrow{\alpha} (\nu z) P^{'}$
	\end{tabular}
    \\\\    
	\bf{LCom}
	\begin{tabular}{c}
	    $P \xrightarrow{x(y)} P^{'}\;\; Q\xrightarrow{\overline{x}z} Q^{'}$
	  \\\hline
	  $P|Q \xrightarrow{\tau} P^{'}\{z/y\}|Q^{'}$
	\end{tabular}
      &
	\bf{Str}
	\begin{tabular}{c}
	    $P\equiv P^{'}\;\; P\xrightarrow{\alpha} Q\;\; Q\equiv Q^{'}$
	  \\\hline
	    $P^{'} \xrightarrow{\alpha} Q^{'}$
	\end{tabular}
    \\\\
	\bf{Opn}
	\begin{tabular}{c}
	    $P \xrightarrow{\overline{x}z} P^{'}\;\; z\neq x$
	  \\\hline
	    $(\nu z) P \xrightarrow{\overline{x}(z)} P^{'}$
	\end{tabular}
      &
    \\\hline
    \end{tabular}
    \caption{Late semantic with structural congruence}
    \label{latewith}
  \end{table}
\end{definition}


\begin{example}
  We prove now that
  \begin{center}
    $a(x).P\; |\; (\nu b)\overline{a}b.Q\; \xrightarrow{\tau} P\{b/x\}\; |\; Q$
  \end{center}
  where $b\notin fn(P)$. This follows from
  \[
    a(x).P\; |\; (\nu b)\overline{a}b.Q\; \equiv\; (\nu b)(a(x).P\; |\; \overline{a}b.Q)
  \]
  and
  \[
    (\nu b)(a(x).P\; |\; \overline{a}b.Q) \xrightarrow{\tau} (\nu b)(P\{b/x\}\; |\; Q)
  \]
  with the rule $Str$. We can prove the last transition in the following way:
  \[
    \inferrule* [left=Res] {
	\inferrule* [left=LCom] {
	    \inferrule* [left=LInp] {
	      b\notin fn(P)
	    }{
	      a(x).P\; \xrightarrow{ab}\; P\{b/x\}
	    }
	  \\
	    \inferrule* [left=Out] {
	    }{
	      \overline{a}b.Q\; \xrightarrow{\overline{a}b}\; Q
	    }
	}{
	  a(x).P\; |\; \overline{a}b.Q\; \xrightarrow{\tau}\; P\{b/x\}\; |\; Q
	}
      \\
	b\notin n(\tau)
    }{
      (\nu b)(a(x).P\; |\; \overline{a}b.Q)\; \xrightarrow{\tau}\; (\nu b)(P\{b/x\}\; |\; Q)
    }
  \]

\end{example}

\begin{example}
    We want to prove now that:
    \begin{center}
      $((\nu b) a(x).P)\; |\; \overline{a}b.Q\; \xrightarrow{\tau}\; (\nu c) (P\{c/b\}\{b/x\}\; |\; Q)$
    \end{center}
    where the name $c$ is not in the free names of $Q$ and is not in the names of $P$. We can exploit the structural congruence and get that
    \[
      ((\nu b) a(x).P) | \overline{a}b.Q\; \equiv\; (\nu c) (a(x).(P\{c/b\}) | \overline{a}b.Q)     
    \]
    then we have
    \[
	\inferrule* [left=Res] {
	    \inferrule* [left=LCom]{
		\inferrule* [left=LInp]{
		  b\notin fn(P\{c/b\})
		}{
		  a(x).P\{c/b\}\; \xrightarrow{ab}\; P\{c/b\}\{b/x\}
		}
	      \\
		\inferrule* [left=Out]{
		}{
		  \overline{a}b.Q\; \xrightarrow{\overline{a}b}\; Q
		}
	    }{
	      (a(x).(P\{c/b\}) | \overline{a}b.Q)\; \xrightarrow{\tau}\; (P\{c/b\}\{b/x\} | Q)
	    }
	  \\
	    c\notin n(\tau)
	}{
	  (\nu c) (a(x).(P\{c/b\}) | \overline{a}b.Q)\; \xrightarrow{\tau}\; (\nu c) (P\{c/b\}\{b/x\} | Q)
	}
    \]
    Now we just apply the rule $Str$ to prove the thesis.
\end{example}



\section{Equivalence of the semantics}
\subsection{Equivalence of the early semantics}
Here we write $\rightarrow_{1}$ for the early semantic without structural congruence, $\rightarrow_{2}$ for the early semantic with just $\alpha$ conversion and $\rightarrow_{3}$ for the early semantic with the full structural congruence. We call $R_{1}$ the set of rules for $\rightarrow_{1}$, $R_{2}$ the set of rules for $\rightarrow_{2}$ and $R_{3}$ the set of rules for $\rightarrow_{3}$. In the following section we assume that 
\[
  P\xrightarrow{\alpha}Q\; \Rightarrow\; fn(Q)\subseteq fn(P)
\]
and that 
\[
  P\equiv Q\; \Rightarrow\; fn(Q)= fn(P)
\]

We would like to prove that $P\xrightarrow{\alpha}_{2}P^{'}\; \Rightarrow\; P\xrightarrow{\alpha}_{1}P^{'}$ but this is false because
\[
  \inferrule* [left=Alp]{
      \overline{x}y.x(y).0 \equiv_{\alpha} \overline{x}y.x(w).0
    \\
      \inferrule* [left=Out]{
      }{
	\overline{x}y.x(w).0\xrightarrow{\overline{x}y}_{2}x(w).0
      }
  }{
    \overline{x}y.x(y).0\xrightarrow{\overline{x}y}_{2}x(w).0
  }
\]
so we want to prove 
\[
  \overline{x}y.x(y).0\xrightarrow{\overline{x}y}_{1}x(w).0
\] 
The head of the transition has an output prefixing at the top level so the only rule we could use is $Out$, but the application of $Out$ yields 
\[
  \overline{x}y.x(y).0\xrightarrow{\overline{x}y}_{1}x(y).0
\] 
which is not want we want. We want to prove a weaker version
\[
  P\xrightarrow{\alpha}_{2}P^{'}\; \Rightarrow\; \exists P^{''}: P^{''}\equiv_{\alpha}P^{'}\; and\; P\xrightarrow{\alpha}_{1}P^{''}
\]
but this is also false because 
\[
  \inferrule* [left=Alp]{
      (\nu y)\overline{x}y.0 \equiv_{\alpha} (\nu w)\overline{x}w.0
    \\
      \inferrule* [left=Opn]{
	  \inferrule* [left=Out]{
	  }{
	    \overline{x}w.0\xrightarrow{\overline{x}w}_{2}0
	  }
	\\
	  w\neq x
      }{
	(\nu w)\overline{x}w.0\xrightarrow{\overline{x}(w)}_{2}0
      }
  }{
    (\nu y)\overline{x}y.0\xrightarrow{\overline{x}(w)}_{2}0
  }
\]
Let us try to prove 
\[
  (\nu y)\overline{x}y.0\xrightarrow{\overline{x}(w)}_{1}[0]_{\equiv_{\alpha}}
\]
where $[0]_{\equiv_{\alpha}}$ stands for any process $\alpha$ equivalent to $0$(which is only $0$ itself). The head of the transition has a restriction at the top level, so the only rules applicable are 
\begin{description}
  \item[Res]
    we cannot apply this rule because the body of the transition is $0$ and has no restriction at the top level. Even if we search for a proof of
    \[
      (\nu y)\overline{x}y.0\xrightarrow{\overline{x}(w)}_{1}(\nu y)0
    \]
    if we apply the rule $Res$ the premise is $\overline{x}y.0\xrightarrow{\overline{x}(w)}_{1}0$, now the top level is an output prefixing and so the only rule applicable is $Out$ which yields to a different transition $\overline{x}y.0\xrightarrow{\overline{x}y}_{1}0$.
  \item[ResAlp]
    we cannot apply this rule because it has an input as action whether we want to prove a transition with a bound output as action
  \item[Opn]
    this rule does not fit because the restricted name is also the bound output object, whether in the transition this does not hold.
\end{description}


\begin{theorem}
  $P\xrightarrow{\alpha}_{1}P^{'}\; \Rightarrow\; P\xrightarrow{\alpha}_{2}P^{'}$
  \begin{proof}
    The proof can go by induction on the length of the derivation of a transaction, and then both the base case and the inductive case proceed by cases on the last rule used in the derivation. However it is not necessary to show all the details of the proof because the rules in $R_{2}$ are almost the same as the rules in $R_{1}$, the only difference is that in $R_{2}$ we have the rule $Alp$ instead of $ResAlp$. The rule $Alp$ can mimic the rule $ResAlp$ in the following way:
	\[
	  \inferrule *{
	      (\nu z)P\equiv_{\alpha} (\nu w)P\{w/z\}
	    \\
	      w\notin n(P)
	    \\
	      (\nu w)P\{w/z\}\;
		\xrightarrow{xz}\;
		  P^{'}
	  }{
	    (\nu z)P\; 
	      \xrightarrow{xz}\;
		P^{'}
	  }
	\]
  \end{proof}
\end{theorem}


\begin{theorem}
  $P\xrightarrow{\alpha}_{2}P^{'}\; \Leftrightarrow\; \exists P^{''}: P^{'}\equiv P^{''}\; and\; P\xrightarrow{\alpha}_{3}P^{''}$
  \begin{proof}
    \begin{description}
      \item[$\Rightarrow$] 
	First we prove $P\xrightarrow{\alpha}_{2}P^{'}\; \Rightarrow\; \exists P^{''}: P^{'}\equiv P^{''}\; and\; P\xrightarrow{\alpha}_{3}P^{''}$. The proof is by induction on the length of the derivation of $P\xrightarrow{\alpha}_{2}P^{'}$, and then both the base case and the inductive case proceed by cases on the last rule used.
	\begin{description}
	  \item[base case]
	    in this case the rule used can be one of the following $Out, EInp, Tau$ which are also in $R_{3}$ so a derivation of $P\xrightarrow{\alpha}_{2}P^{'}$ is also a derivation of $P\xrightarrow{\alpha}_{3}P^{'}$
	  \item[inductive case]:
	    \begin{itemize}
	      \item 
		the last rule used can be one in $R_{2}\cap R_{3}=\{Res, Opn\}$ and so for example we have 
		\[
		  \inferrule* [left=Res]{
		      P\xrightarrow{\alpha}_{2} P^{'}
		    \\
		      z\notin n(\alpha)
		  }{
		    (\nu z) P\xrightarrow{\alpha}_{2}(\nu z) P^{'}
		  }
		\]
		we apply the inductive hypothesis on $P\xrightarrow{\alpha}_{2} P^{'}$ and get $\exists P^{''}$ such that $P^{'}\equiv P^{''}$ and $P\xrightarrow{\alpha}_{3} P^{''}$. The proof we want is:
		\[
		  \inferrule* [left=Res]{
		      P\xrightarrow{\alpha}_{3} P^{''}
		    \\
		      z\notin n(\alpha)
		  }{
		    (\nu z) P\xrightarrow{\alpha}_{3}(\nu z) P^{''}
		  }
		\]
		and $(\nu z) P^{''}\equiv (\nu z) P^{'}$
	      \item
		the last rule used can be one in $\{ParL, ParR, SumL, SumR, EComL, EComR\}$, in this case we can proceed as in the previous case and if necessary add an application of $Str$ thus exploiting the commutativity of sum or parallel composition. For example
		\[
		  \inferrule* [left=ParR]{
		      Q\xrightarrow{\alpha}_{2}Q^{'}
		    \\
		      bn(\alpha)\cap fn(Q)=\emptyset
		  }{
		      P|Q\xrightarrow{\alpha}_{2}P|Q^{'}
		  }
		\]	
		now we apply the inductive hypothesis to $Q\xrightarrow{\alpha}_{2}Q^{'}$ and get $Q\xrightarrow{\alpha}_{3}Q^{''}$ for a $Q^{''}$ such that $Q^{'}\equiv Q^{''}$. The proof we want is
		\[
		  \inferrule* [left=Str]{
		      P|Q\equiv Q|P
		    \\
		      \inferrule* [left=Par]{
			  Q\xrightarrow{\alpha}_{3}Q^{''}
			\\
			  bn(\alpha)\cap fn(Q)=\emptyset
		      }{
			  Q|P\xrightarrow{\alpha}_{3}Q^{''}|P
		      }
		    }{
		      P|Q\xrightarrow{\alpha}_{3}Q^{''}|P
		    }
		\]
		and $Q^{''}|P\equiv P|Q^{'}$
	      \item
		if the last rule used is $Cns$:
		\[
		    \inferrule* [left=Cns]{
			A(\tilde{x})\stackrel{def}{=}P
		      \\
			P\{\tilde{y}/\tilde{x}\}\xrightarrow{\alpha}_{2}P^{'}
		    }{
		      A(\tilde{y})\xrightarrow{\alpha}_{2}P^{'}
		    }
		\]
		we apply the inductive hypothesis on the premise and get $P\{\tilde{y}/\tilde{x}\}\xrightarrow{\alpha}_{3}P^{''}$ such that $P^{''}\equiv P^{'}$. Now the proof we want is
		\[
		    \inferrule* [left=Str]{
			A(\tilde{y})\equiv P\{\tilde{y}/\tilde{x}\}
		      \\
			P\{\tilde{y}/\tilde{x}\}\xrightarrow{\alpha}_{3}P^{''}
		    }{
		      A(\tilde{y})\xrightarrow{\alpha}_{3}P^{''}
		    }
		\]		
	      \item
		if the last rule is $Alp$, then we just notice that this rule is a particular case of $Str$
	      \item
		if the last rule is $ClsL$(the case for $ClsR$ is simmetric) then we have
		\[
		    \inferrule* [left=ClsL]{
			P\xrightarrow{\overline{x}(z)}_{2}P^{'}
		      \\
			Q\xrightarrow{xz}_{2}Q^{'}
		      \\
			z\notin fn(Q)
		    }{
		      P|Q\xrightarrow{\tau}_{2}(\nu z)(P^{'}|Q^{'})
		    }
		\]
		there is no easy way to mimic this rule with the rules in $R_{3}$. But if in the derivation tree we have an introduction of the bound output $\overline{x}(z)$ followed directly by an elimination of the same bound output such as:
		\[
		    \inferrule* [left=ClsL]{
			\inferrule* [left=Opn]{
			    P\xrightarrow{\overline{x}z}_{2}P^{'}
			  \\
			    z\neq x
			}{
			  (\nu z)P\xrightarrow{\overline{x}(z)}_{2}P^{'}
			}
		      \\
			Q\xrightarrow{xz}_{2}Q^{'}
		      \\
			z\notin fn(Q)
		    }{
		      ((\nu z)P)|Q\xrightarrow{\tau}_{2}(\nu z)(P^{'}|Q^{'})
		    }
		\]
		we can apply the inductive hypothesis and get that 
		\[
		  P\xrightarrow{\overline{x}z}_{3}P^{''}\; and\; Q\xrightarrow{xz}_{3}Q^{''}
		\]
		where $P^{'}\equiv P^{''}$ and $Q^{'}\equiv Q^{''}$, so we create the needed proof in the following way
		\[
		    \inferrule* [left=Str]{
			(\nu z)(P|Q)\equiv ((\nu z)P)|Q
		      \\
			\inferrule* [left=Res]{
			  \inferrule* [left=Com]{
			      P\xrightarrow{\overline{x}z}_{3}P^{''}
			    \\
			      Q\xrightarrow{xz}_{3}Q^{''}
			  }{
			    P|Q\xrightarrow{\tau}_{3}P^{''}|Q^{''}
			  }
			}{
			  (\nu z)(P|Q)\xrightarrow{\tau}_{3}(\nu z)(P^{''}|Q^{''})
			}
		    }{
		      ((\nu z)P)|Q\xrightarrow{\tau}_{3}(\nu z)(P^{''}|Q^{''})
		    }
		\]
		We can always take a derivation tree in $R_{2}$ and move downward each occurrence of $Opn$ until we find the appropriate occurrence of $ClsL$. In this process we might need to use the structural congruence, in particular the scope extension axioms. We can attempt to prove that in the following way:
		\[
		  P\xrightarrow{\overline{x}(z)}_{2}P^{'}\; \Rightarrow\; \exists R: (\nu z)R\equiv P
		\]
		and if $(\nu z)R\xrightarrow{\overline{x}(z)}_{2}P^{'}$ then there exists a derivation tree for this transition such that the last rule used is $Opn$
	    \end{itemize}	    
	\end{description}
      \item[$\Leftarrow$] 
	Secondly we prove $P\xrightarrow{\alpha}_{3}P^{'}\; \Rightarrow\; \exists P^{''}: P^{'}\equiv P^{''}\; and\; P\xrightarrow{\alpha}_{2}P^{''}$. The proof is by induction on the length of the derivation of $P\xrightarrow{\alpha}_{3}P^{'}$, and then both the base case and the inductive case proceed by cases on the last rule used.
	\begin{description}
	  \item[base case]
	    in this case the rule used can be one of the following $Out, EInp, Tau$ which are also in $R_{2}$ so a derivation of $P\xrightarrow{\alpha}_{3}P^{'}$ is also a derivation of $P\xrightarrow{\alpha}_{2}P^{'}$
	  \item[inductive case]:
	    \begin{itemize}
	      \item 
		the last rule used can be one in $R_{2}\cap R_{3}=\{Res, Opn\}$, this goes like in the previous proof for the opposite direction with the transition numbers swapped.
	      \item
		the last rule used can be one in $\{Par, Sum, ECom\}$, in this case we apply the inductive hypothesis to the premises and the apply the appropriate rule in $\{ParL, SumL, EComL\}$. For example
		\[
		  \inferrule* [left=Par]{
		      P\xrightarrow{\alpha}_{3}P^{'}
		    \\
		      bn(\alpha)\cap fn(Q)=\emptyset
		  }{
		      P|Q\xrightarrow{\alpha}_{3}P^{'}|Q
		  }
		\]	
		now we apply the inductive hypothesis to $P\xrightarrow{\alpha}_{3}P^{'}$ and get $P\xrightarrow{\alpha}_{2}P^{''}$ for a $P^{''}$ such that $P^{'}\equiv P^{''}$. The proof we want is
		\[
		      \inferrule* [left=ParL]{
			  P\xrightarrow{\alpha}_{2}P^{''}
			\\
			  bn(\alpha)\cap fn(Q)=\emptyset
		      }{
			  P|Q\xrightarrow{\alpha}_{2}P|Q^{''}
		      }
		\]
		and $Q^{''}|P\equiv P|Q^{'}$
	      \item
		if the last rule is $Str$, then we have
		\[
		  \inferrule* [left=Str]{
		      P\equiv Q
		    \\
		      Q\xrightarrow{\alpha}_{3}P^{'}
		  }{
		    P\xrightarrow{\alpha}_{3}P^{'}
		  }
		\]
		we proceed by cases on the premise $Q\xrightarrow{\alpha}_{3}P^{'}$. In the cases of prefix we can just use the appropriate prefix rule of $R_{2}$ and get rid of the $Str$. In the other cases we can move upward the occurrence of $Str$, after that we have one or two smaller derivation trees that are suitable to application of the inductive hypothesis and finally we apply some appropriate rules in $R_{2}$.
		\begin{description}
		  \item[Out]
		    Since we are using the rule $Out$, $Q=\overline{x}y.Q_{1}$ for some $Q_{1}$. $Q\equiv P$ means for the inversion lemma for structural congruence that $P=\overline{x}y.P_{1}$ for some $P_{1}\equiv Q_{1}$. The last part of the derivation tree is 
		    \[
		      \inferrule* [left=Str]{
			  \overline{x}y.P_{1}\equiv \overline{x}y.Q_{1}
			\\
			  \inferrule* [left=Out]{
			  }{
			    \overline{x}y.Q_{1}\xrightarrow{\overline{x}y}_{3}Q_{1}
			  }
		      }{
			\overline{x}y.P_{1}\xrightarrow{\overline{x}y}_{3}Q_{1}
		      }
		    \]
		    So we get 
		    \[
		      \inferrule* [left=Out]{
		      }{
			\overline{x}y.P_{1}\xrightarrow{\overline{x}y}_{2}P_{1}
		      }
		    \]
		    where $P_{1}\equiv Q_{1}$
		  \item[Tau] this is very similar to the previous case
		  \item[EInp]
		    Since we are using the rule $EInp$, $Q=x(y).Q_{1}$ for some $Q_{1}$. From $Q\equiv P$ using the inversion lemma for structural congruence we can have two cases:
		    \begin{itemize}
		      \item 
			$P=x(y).P_{1}$ for some $P_{1}\equiv Q_{1}$. The last part of the derivation tree is 
			\[
			  \inferrule* [left=Str]{
			      x(y).P_{1}\equiv x(y).Q_{1}
			    \\
			      \inferrule* [left=EInp]{
			      }{
				x(y).Q_{1}\xrightarrow{xw}_{3}Q_{1}\{w/y\}
			      }
			  }{
			    x(y).P_{1}\xrightarrow{xw}_{3}Q_{1}\{w/y\}
			  }
			\]
			So we get 
			\[
			  \inferrule* [left=EInp]{
			  }{
			    x(y).P_{1}\xrightarrow{xw}_{2}P_{1}\{w/y\}
			  }
			\]
			where $P_{1}\equiv Q_{1}$ implies $P_{1}\{w/y\}\equiv Q_{1}\{w/y\}$
		      \item
			$P=x(z).P_{1}$ for some $P_{1}\equiv Q_{1}\{z/y\}$. The last part of the derivation tree is 
			\[
			  \inferrule* [left=Str]{
			      x(z).P_{1}\equiv x(y).Q_{1}
			    \\
			      \inferrule* [left=EInp]{
			      }{
				x(y).Q_{1}\xrightarrow{xw}_{3}Q_{1}\{w/y\}
			      }
			  }{
			    x(z).P_{1}\xrightarrow{xw}_{3}Q_{1}\{w/y\}
			  }
			\]
			So we get 
			\[
			  \inferrule* [left=EInp]{
			  }{
			    x(z).P_{1}\xrightarrow{xw}_{2}P_{1}\{w/z\}
			  }
			\]
			where $P_{1}\equiv Q_{1}\{z/y\}$ implies $P_{1}\{w/z\}\equiv Q_{1}\{z/y\}\{w/z\}\equiv Q_{1}\{w/y\}$
		    \end{itemize}
		  \item[Par]
		    Since we are using the rule $Par$, $Q=Q_{1}|Q_{2}$ for some $Q_{1},Q_{2}$. $Q\equiv P$ means for the inversion lemma for structural congruence that $P=P_{1}|P_{2}$ for some $P_{1},P_{2}$ such that $P_{1}\equiv Q_{1}$ and $P_{2}\equiv Q_{2}$. The last part of the derivation tree is 
		    \[
		      \inferrule* [left=Str]{
			  P_{1}|P_{2}\equiv Q_{1}|Q_{2}
			\\
			  \inferrule* [left=Par]{
			      Q_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}
			    \\
			      bn(\alpha)\cap fn(Q_{2})=\emptyset
			  }{
			    Q_{1}|Q_{2}\xrightarrow{\alpha}_{3}Q_{1}^{'}|Q_{2}
			  }
		      }{
			P_{1}|P_{2}\xrightarrow{\alpha}_{3}Q_{1}^{'}|Q_{2}
		      }
		    \]
		    the first step is this transformation:
		    \[
		      \inferrule* [left=Par]{
			  \inferrule* [left=Str]{
			      P_{1}\equiv Q_{1}
			    \\
			      Q_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}
			  }{
			    P_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}
			  }
			\\
			  bn(\alpha)\cap fn(P_{2})=\emptyset
		      }{
			P_{1}|P_{2}\xrightarrow{\alpha}_{3}Q_{1}^{'}|P_{2}
		      }
		    \]
		    then we apply the inductive hypothesis on $P_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}$ and get $P_{1}\xrightarrow{\alpha}_{2}Q_{1}^{''}$ where $Q_{1}^{'}\equiv Q_{1}^{''}$. The last step is 
		    \[
		      \inferrule* [left=ParL]{
			  P_{1}\xrightarrow{\alpha}_{2}Q_{1}^{''}
			\\
			  bn(\alpha)\cap fn(P_{2})=\emptyset
		      }{
			P_{1}|P_{2}\xrightarrow{\alpha}_{2}Q_{1}^{''}|P_{2}
		      }
		    \]
		  \item[Sum] this case is very similar to the previous.
		  \item[ECom] this case is also similar to the $Par$ case.
		  \item[Res]
		    Since we are using the rule $Res$, $Q=(\nu z)Q_{1}$ for some $Q_{1}$ and some $z$. $(\nu z)Q_{1}\equiv P$ means thanks to the inversion lemma for structural congruence that one of the following cases holds:
                    \begin{itemize}
		      \item
			$P=(\nu z)P_{1}$ for some $P_{1}$ such that $P_{1}\equiv Q_{1}$. The last part of the derivation tree is 
			\[
			  \inferrule* [left=Str]{
			      (\nu z)P_{1}\equiv (\nu z)Q_{1}
			    \\
			      \inferrule* [left=Res]{
				  Q_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}
				\\
				  z\notin n(\alpha)
			      }{
				(\nu z)Q_{1}\xrightarrow{\alpha}_{3}(\nu z)Q_{1}^{'}
			      }
			  }{
			    (\nu z)P_{1}\xrightarrow{\alpha}_{3}(\nu z)Q_{1}^{'}
			  }
			\]
			the first step is this transformation:
			\[
			  \inferrule* [left=Res]{
			      \inferrule* [left=Str]{
				  P_{1}\equiv Q_{1}
				\\
				  Q_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}
			      }{
				P_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}
			      }
			    \\
			      z\notin n(\alpha)
			  }{
			    (\nu z)P_{1}\xrightarrow{\alpha}_{3}(\nu z)Q_{1}^{'}
			  }
			\]
			then we apply the inductive hypothesis on $P_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}$ and get $P_{1}\xrightarrow{\alpha}_{2}Q_{1}^{''}$ where $Q_{1}^{'}\equiv Q_{1}^{''}$. The last step is 
			\[
			  \inferrule* [left=Res]{
			      P_{1}\xrightarrow{\alpha}_{2}Q_{1}^{''}
			    \\
			      z\notin n(\alpha)
			  }{
			    (\nu z)P_{1}\xrightarrow{\alpha}_{2}(\nu z)Q_{1}^{''}
			  }
			\]
		      \item
			$P=(\nu y)P_{1}$ for some $P_{1}$ such that $P_{1}\equiv Q_{1}\{y/z\}$. The last part of the derivation tree is 
			\[
			  \inferrule* [left=Str]{
			      (\nu y)P_{1}\equiv (\nu z)Q_{1}
			    \\
			      \inferrule* [left=Res]{
				  Q_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}
				\\
				  z\notin n(\alpha)
			      }{
				(\nu z)Q_{1}\xrightarrow{\alpha}_{3}(\nu z)Q_{1}^{'}
			      }
			  }{
			    (\nu y)P_{1}\xrightarrow{\alpha}_{3}(\nu z)Q_{1}^{'}
			  }
			\]
			we use the following fact which we will prove separately:
			\begin{center}
			  $y\notin n(P)$ and 
			  $z\notin n(\alpha)$ and 
			  $P\xrightarrow{\alpha}_{3}Q$ $\Rightarrow$ $P\{y/z\}\xrightarrow{\alpha}_{3}Q\{y/z\}$
			\end{center}
			the first step is this transformation:
			\[
			  \inferrule* [left=Res]{
			      \inferrule* [left=Str]{
				  P_{1}\equiv Q_{1}\{y/z\}
				\\
				  Q_{1}\{y/z\}\xrightarrow{\alpha}_{3}Q_{1}^{'}\{y/z\}
			      }{
				P_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}\{y/z\}
			      }
			    \\
			      y\notin n(\alpha)
			  }{
			    (\nu y)P_{1}\xrightarrow{\alpha}_{3}(\nu y)(Q_{1}^{'}\{y/z\})
			  }
			\]
			then we apply the inductive hypothesis on $P_{1}\xrightarrow{\alpha}_{3}Q_{1}^{'}\{y/z\}$ and get $P_{1}\xrightarrow{\alpha}_{2}Q_{1}^{''}$ where $Q_{1}^{'}\{y/z\}\equiv Q_{1}^{''}$ which implies $(\nu y)(Q_{1}^{'}\{y/z\})\equiv (\nu y)(Q_{1}^{''})$ which in turn implies $(\nu z)Q_{1}^{'}\equiv (\nu y)(Q_{1}^{''})$. The last step is 
			\[
			  \inferrule* [left=Res]{
			      P_{1}\xrightarrow{\alpha}_{2}Q_{1}^{''}
			    \\
			      y\notin n(\alpha)
			  }{
			    (\nu y)P_{1}\xrightarrow{\alpha}_{2}(\nu y)Q_{1}^{''}
			  }
			\]
                      \end{itemize}
		  \item[Opn]
		    Since we are using the rule $Opn$, $Q=(\nu z) Q_{1}$ for some $Q_{1}$. $(\nu z) Q_{1}\equiv P$ means for the inversion lemma for structural congruence that
		    \begin{itemize}
		      \item
			$P=(\nu z) P_{1}$ for some $P_{1}$ such that $P_{1}\equiv Q_{1}$. The last part of the derivation tree is 
			\[
			  \inferrule* [left=Str]{
			      (\nu z) P_{1}\equiv (\nu z) Q_{1}
			    \\
			      \inferrule* [left=Opn]{
				  Q_{1} \xrightarrow{\overline{x}z} Q_{1}^{'}
				\\
				  z\neq x
			      }{
				(\nu z) Q_{1} \xrightarrow{\overline{x}(z)} Q_{1}^{'}
			      }
			  }{
			    (\nu z) P_{1} \xrightarrow{\overline{x}(z)} Q_{1}^{'}
			  }
			\]
			the first step is this transformation:
			\[
			  \inferrule* [left=Res]{
			      \inferrule* [left=Str]{
				  P_{1}\equiv Q_{1}
				\\
				  Q_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}
			      }{
				P_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}
			      }
			    \\
			      z\neq x
			  }{
			    (\nu z)P_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}
			  }
			\]
			then we apply the inductive hypothesis on $P_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}$ and get $P_{1}\xrightarrow{\overline{x}z}_{2}Q_{1}^{''}$ where $Q_{1}^{'}\equiv Q_{1}^{''}$. The last step is 
			\[
			  \inferrule* [left=Res]{
			      P_{1}\xrightarrow{\overline{x}z}_{2}Q_{1}^{''}
			    \\
			      z\neq x
			  }{
			    (\nu z)P_{1}\xrightarrow{\overline{x}z}_{2}Q_{1}^{''}
			  }
			\]
		      \item
			$P=(\nu z) P_{1}$ for some $P_{1}$ such that $P_{1}\equiv Q_{1}$. The last part of the derivation tree is 
			\[
			  \inferrule* [left=Str]{
			      (\nu z) P_{1}\equiv (\nu z) Q_{1}
			    \\
			      \inferrule* [left=Opn]{
				  Q_{1} \xrightarrow{\overline{x}z} Q_{1}^{'}
				\\
				  z\neq x
			      }{
				(\nu z) Q_{1} \xrightarrow{\overline{x}(z)} Q_{1}^{'}
			      }
			  }{
			    (\nu z) P_{1} \xrightarrow{\overline{x}(z)} Q_{1}^{'}
			  }
			\]
			the first step is this transformation:
			\[
			  \inferrule* [left=Res]{
			      \inferrule* [left=Str]{
				  P_{1}\equiv Q_{1}
				\\
				  Q_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}
			      }{
				P_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}
			      }
			    \\
			      z\neq x
			  }{
			    (\nu z)P_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}
			  }
			\]
			then we apply the inductive hypothesis on $P_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}$ and get $P_{1}\xrightarrow{\overline{x}z}_{2}Q_{1}^{''}$ where $Q_{1}^{'}\equiv Q_{1}^{''}$. The last step is 
			\[
			  \inferrule* [left=Res]{
			      P_{1}\xrightarrow{\overline{x}z}_{2}Q_{1}^{''}
			    \\
			      z\neq x
			  }{
			    (\nu z)P_{1}\xrightarrow{\overline{x}z}_{2}Q_{1}^{''}
			  }
			\]
		      \item
			$P=(\nu y) P_{1}$ for some $P_{1}$ such that $P_{1}\equiv Q_{1}\{y/z\}$. The last part of the derivation tree is 
			\[
			  \inferrule* [left=Str]{
			      (\nu y) P_{1}\equiv (\nu z) Q_{1}
			    \\
			      \inferrule* [left=Opn]{
				  Q_{1} \xrightarrow{\overline{x}z} Q_{1}^{'}
				\\
				  z\neq x
			      }{
				(\nu z) Q_{1} \xrightarrow{\overline{x}(z)} Q_{1}^{'}
			      }
			  }{
			    (\nu y) P_{1} \xrightarrow{\overline{x}(z)} Q_{1}^{'}
			  }
			\]
			the first step is this transformation:
			\[
			  \inferrule* [left=Str]{
			      (\nu y) P_{1}\equiv (\nu y) Q_{1}\{y/z\}
			    \\
			      \inferrule* [left=Str]{
				  (\nu y) Q_{1}\{y/z\}\equiv_{\alpha} (\nu z) Q_{1}
				\\
				  \inferrule* [left=Opn]{
				      Q_{1} \xrightarrow{\overline{x}z} Q_{1}^{'}
				    \\
				      z\neq x
				  }{
				    (\nu z) Q_{1} \xrightarrow{\overline{x}(z)} Q_{1}^{'}
				  }
			      }{
				(\nu y) Q_{1}\{y/z\} \xrightarrow{\overline{x}(z)} Q_{1}^{'}
			      }
			  }{
			    (\nu y) P_{1} \xrightarrow{\overline{x}(z)} Q_{1}^{'}
			  }
			\]
			\[
			  \inferrule* [left=Res]{
			      \inferrule* [left=Str]{
				  P_{1}\equiv Q_{1}\{y/z\}
				\\
				  Q_{1}\{y/z\}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}\{y/z\}
			      }{
				P_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}
			      }
			    \\
			      z\neq x
			  }{
			    (\nu z)P_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}
			  }
			\]
			then we apply the inductive hypothesis on $P_{1}\xrightarrow{\overline{x}z}_{3}Q_{1}^{'}$ and get $P_{1}\xrightarrow{\overline{x}z}_{2}Q_{1}^{''}$ where $Q_{1}^{'}\equiv Q_{1}^{''}$. The last step is 
			\[
			  \inferrule* [left=Res]{
			      P_{1}\xrightarrow{\overline{x}z}_{2}Q_{1}^{''}
			    \\
			      z\neq x
			  }{
			    (\nu z)P_{1}\xrightarrow{\overline{x}z}_{2}Q_{1}^{''}
			  }
			\]
		  \end{itemize}
		\end{description}
	    \end{itemize}	    
	\end{description}
    \end{description}
    To complete the proof we have to prove this:
    \begin{center}
      $y\notin n(P)$ and 
      $z\notin n(\alpha)$ and 
      $P\xrightarrow{\alpha}_{3}Q$ $\Rightarrow$ $P\{y/z\}\xrightarrow{\alpha}_{3}Q\{y/z\}$
    \end{center}
    the proof goes by induction on the length of the derivation of $P\xrightarrow{\alpha}_{3}Q$ and then it goes by cases on the last rule of the derivation:
    \begin{description}
      \item[base case]:
	\begin{description}
	  \item[]

	  \bf{Out}
	  \begin{tabular}{c}
	    \hline
	    $\overline{x}y.P \xrightarrow{\overline{x}y} P$
	  \end{tabular}
	  \bf{EInp}
	  \begin{tabular}{c}
	    \hline
	    $x(z).P \xrightarrow{xy} P\{y/z\}$
	  \end{tabular}
	  \bf{Tau}
	  \begin{tabular}{c}
	    \hline
	    $\tau.P \xrightarrow{\tau} P$
	  \end{tabular}

	\end{description}
      \item[inductive case]:
	\begin{description}
	  \item 
	  \bf{Par}
	  \begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}\;\; bn(\alpha)\cap fn(Q)=\emptyset$\\
	    \hline
	    $P|Q \xrightarrow{\alpha} P^{'}|Q$
	  \end{tabular}

	  \bf{Sum}
	  \begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}$\\
	    \hline
	    $P+Q \xrightarrow{\alpha} P^{'}$
	  \end{tabular}

	    \bf{ECom}
	    \begin{tabular}{c}
	      $P \xrightarrow{xy} P^{'}\;\; Q\xrightarrow{\overline{x}y} Q^{'}$\\
	      \hline
	      $P|Q \xrightarrow{\tau} P^{'}|Q^{'}$
	    \end{tabular}

	  \bf{Res}
	  \begin{tabular}{c}
	    $P \xrightarrow{\alpha} P^{'}\;\; z\notin n(\alpha)$\\
	    \hline
	    $(\nu z) P \xrightarrow{\alpha} (\nu z) P^{'}$
	  \end{tabular}


	  \bf{Opn}
	  \begin{tabular}{c}
	    $P \xrightarrow{\overline{x}z} P^{'}\;\; z\neq x$\\
	    \hline
	    $(\nu z) P \xrightarrow{\overline{x}(z)} P^{'}$
	  \end{tabular}

	  \bf{Str}
	  \begin{tabular}{c}
	    $P\equiv P^{'}\;\; P\xrightarrow{\alpha} Q\;\; Q\equiv Q^{'}$\\
	    \hline
	    $P^{'} \xrightarrow{\alpha} Q^{'}$
	  \end{tabular}
	\end{description}
    \end{description}
  \end{proof}
\end{theorem}



\subsection{Equivalence of the late semantics}


\section{Bisimilarity and Congruence}

We present here some behavioural equivalences and some of their properties. 

\subsection{Bisimilarity}
In the following we will use the phrase $bn(\alpha)$ is fresh in a definition to mean that the name in $bn(\alpha)$, if any, is different from any free name occurring in any of the agents in the definition. We write 
\[
  \rightarrow_{E}
\]
for the early semantic and 
\[
  \rightarrow_{L}
\]
for the late semantic.

\begin{definition}
  A \emph{strong (late) bisimulation} is a symmetric binary relation $\mathbb{R}$ on agents satisfying the following: $P\mathbb{R} Q$ and $P\; \xrightarrow{\alpha}_{L}\; P^{'}$ where $bn(\alpha)$ is fresh implies that
  \begin{itemize}
    \item
      if $\alpha=a(x)$ then $\exists Q^{'}: Q\xrightarrow{a(x)}_{L}Q^{'}\; \wedge\; \forall u:\; P^{'}\{u/x\}\mathbb{R}Q^{'}\{u/x\}$
    \item
      if $\alpha$ is not an input the $\exists Q^{'}: Q\xrightarrow{\alpha}_{L}Q^{'}\; \wedge\; P^{'}\mathbb{R}Q^{'}$
  \end{itemize}
  $P$ and $Q$ are strongly bisimilar, written $P\; \dot{\sim}\; Q$, if they are related by a bisimulation. 
\end{definition}

The union of all bisimulation $\dot{\sim}$ is a bisimulation. If two process are structurally congruent then because of the rule $Str$ they are also strong bisimilar.

\begin{example}
  Two strongly bisimilar processes are the following:
  \[
    a(x).0|\overline{b}x.0\; \dot{\sim}\; a(x).\overline{b}x.0 + \overline{b}x.a(x).0
  \]
  and the bisimulation(without showing the simmetric part) is  the following:
  \[
    \{(a(x).0|\overline{b}x.0, a(x).\overline{b}x.0 + \overline{b}x.a(x).0),(a(x).0|0,a(x).0), (0|0,0|0)\} \cup \{(0|\overline{b}x.0,\overline{b}x.0)|x\in \mathbb{N}\} 
  \]

  If we apply the substitution $\{a/b\}$ to each process then they are not strongly bisimilar anymore because $(a(x).0|\overline{b}x.0)\{a/b\}$ is $a(x).0|\overline{a}x.0$ and this process can perform an invisible action whether $(a(x).\overline{b}x.0 + \overline{b}x.a(x).0)\{a/b\}$ cannot. This shows that strong bisimulation is not closed under substitution.
\end{example}

\begin{proposition}
  If $P \dot{\sim} Q$ and $\sigma$ is injective then $P\sigma \dot{\sim} Q\sigma$
%   \begin{proof}
%     We have to establish that transitions are preserved by injective substitution, i.e., that for injective $\sigma$ 
%     \[
%       P\xrightarrow{\alpha}P^{'}\; \Rightarrow\; P\sigma\xrightarrow{\alpha\sigma}P^{'}\sigma
%     \]
%     by induction on the inference of $P\xrightarrow{\alpha}P^{'}$. For this purpose we consider the late semantic with structural congruence:
%     %The last rule of a derivation of $P\xrightarrow{\alpha}P^{'}$ can be:
%     \begin{description}
%       \item[$Pref$] 		
% 	An application of the rule pref let us prove that $\alpha\sigma.P\sigma\xrightarrow{\alpha\sigma}P\sigma$
%       \item[$Str$]
% 	The premises of the rule tell us that: $P\xrightarrow{\alpha}Q$, $P^{'}\equiv P$ and $Q\equiv Q^{'}$. We apply the inductive hypothesis to the first premise and get $P\sigma\xrightarrow{\alpha\sigma}Q\sigma$. From the other two premises we get that $P^{'}\sigma\equiv P\sigma$ and $Q\sigma\equiv Q^{'}\sigma$. We should prove this separately. So applying the rule $Str$ we get the result $P^{'}\sigma\xrightarrow{\alpha\sigma}Q^{'}\sigma$.
%       \item[$Sum$]
% 	
%       \item[$Par$]
%       \item[$Com$]
%       \item[$Res$]
%       \item[$Opn$]
%     \end{description}
%   \end{proof}
\end{proposition}

\begin{proposition}
  $\dot{\sim}$ is an equivalence
\end{proposition}

\begin{proposition}
  $\dot{\sim}$ is preserved by all operators except input prefix
\end{proposition}


\subsection{Congruence}

\begin{definition}\index{congruence! strong}
  We say that two agents $P$ and $Q$ are \emph{strongly congruent}, written $P\sim Q$ if
  \begin{center}
    $P\sigma \dot{\sim} Q\sigma$ for all substitution $\sigma$    
  \end{center}
\end{definition}

\begin{proposition}
  Strong congruence is the largest congruence in bisimilarity.
\end{proposition}

\subsection{Variants of Bisimilarity}

We define a bisimulation for the early semantic with structural congruence, for clarity when referring to the early semantic we index the transition with $ _{E}$. 
\begin{definition}\index{bisimulation! strong! early! with early semantic}
  A \emph{strong early bisimulation with early semantic} is a symmetric binary relation $\mathbb{R}$ on agents satisfying the following: $P\mathbb{R} Q$ and $P\; \xrightarrow{\alpha}_{E}\; P^{'}$ where $bn(\alpha)$ is fresh implies that
  \begin{center}
    $\exists Q^{'}: Q\xrightarrow{\alpha}_{E}Q^{'}\; \wedge\; P^{'}\mathbb{R}Q^{'}$
  \end{center}
  $P$ and $Q$ are strongly early bisimilar, written $P\; \dot{\sim}_{E}\; Q$, if they are related by an early bisimulation.
\end{definition}

\begin{definition}\index{bisimulation! strong! early! with late semantic}
  A \emph{strong early bisimulation with late semantic} is a symmetric binary relation $\mathbb{R}$ on agents satisfying the following: $P\mathbb{R} Q$ and $P\; \xrightarrow{\alpha}_{L}\; P^{'}$ where $bn(\alpha)$ is fresh implies that
  \begin{itemize}
    \item
      if $\alpha=a(x)$ then $\forall u\; \exists Q^{'}:\;\; Q\xrightarrow{a(x)}_{L}Q^{'}\; \wedge\; P^{'}\{u/x\}\mathbb{R}Q^{'}\{u/x\}$
    \item
      if $\alpha$ is not an input then $\exists Q^{'}:\;\; Q\xrightarrow{\alpha}_{L}Q^{'}\; \wedge\; P^{'}\mathbb{R}Q^{'}$
  \end{itemize}
\end{definition}

\begin{proposition}
  Early bisimilarity is preserved by all operators except input prefix. 
\end{proposition}


\begin{definition}\index{congruence! early}
  The \emph{early congruence} $\sim_{E}$ is defined by
  \begin{center}
    $P\sim_{E} Q$ if $\forall \sigma\; P\sigma \dot{\sim}_{E} Q\sigma$
  \end{center}
  where $\sigma$ is a substitution.
\end{definition}

\begin{proposition}
  The early congruence is the largest congruence in $\dot{\sim}_{E}$.  
\end{proposition}

In the following definition we consider a subcalculus without restriction. 
\begin{definition}\index{bisimulation! strong! open! early}
  A \emph{strong open bisimulation} is a symmetric binary relation $\mathbb{R}$ on agents satisfying the following for all substitutions $\sigma$: $P\mathbb{R} Q$ and $P\sigma\; \xrightarrow{\alpha}_{E}\; P^{'}$ where $bn(\alpha)$ is fresh implies that
  \begin{center}
    $\exists Q^{'}:\;\; Q\sigma\xrightarrow{\alpha}_{E}Q^{'}\; \wedge\; P^{'}\mathbb{R}Q^{'}$
  \end{center}
  $P$ and $Q$ are strongly open bisimilar, written $P\; \dot{\sim}_{O}\; Q$ if they are related by an open bisimulation.
\end{definition}

\begin{proposition}
  strong open bisimulation is also a late bisimulation, is closed under substitution, is an equivalence and a congruence
\end{proposition}



